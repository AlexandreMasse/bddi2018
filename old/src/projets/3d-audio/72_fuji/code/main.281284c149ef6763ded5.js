webpackJsonp([0],[,function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=function(){function e(t,i,n,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];s(this,e),this.ctx;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.ctx=new AudioContext}catch(e){throw new Error("Web Audio API is not supported in this browser")}this._bpm=i,this._beatDuration=60/this._bpm,this._offsetTime=n,this._sections=[],this._kicks=[],this._beats=[],this._startTime=0,this._pauseTime=0,this._isPlaying=!1,this._isLoaded=!1,this._progress=0,this._onUpdate=this.onUpdate.bind(this),this._onEnded=this.onEnded.bind(this),this.isEnded=!1,this.gainNode=this.ctx.createGain(),this.gainNode.connect(this.ctx.destination),this.analyserNode=this.ctx.createAnalyser(),this.analyserNode.connect(this.gainNode),this.analyserNode.smoothingTimeConstant=.8,this.analyserNode.fftSize=512;var r=this.analyserNode.frequencyBinCount;this.frequencyDataArray=new Uint8Array(r),this.timeDomainDataArray=new Uint8Array(r),o&&(this.debug=new h(this)),this._load(t,a),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame}return n(e,[{key:"_load",value:function(e,t){var i=this;if(e){this._isLoaded=!1,this._progress=0;var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onprogress=function(e){i._progress=e.loaded/e.total},s.onload=function(){i.ctx.decodeAudioData(s.response,function(e){i._buffer=e,i._isLoaded=!0,t&&t()},function(e){console.log(e)})},s.send()}}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.req&&cancelAnimationFrame(this.req),this._onUpdate(),this._isPlaying=!0;var t=this._pauseTime-this._startTime+e;this._startTime=this.ctx.currentTime-t,this.sourceNode=this.ctx.createBufferSource(),this.sourceNode.connect(this.analyserNode),this.sourceNode.buffer=this._buffer,this.sourceNode.start(0,t),this.sourceNode.addEventListener("ended",this._onEnded,!1)}},{key:"pause",value:function(){this.req&&cancelAnimationFrame(this.req),this.sourceNode&&(this.sourceNode.removeEventListener("ended",this._onEnded,!1),this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode=null),this._pauseTime=this.ctx.currentTime,this._isPlaying=!1}},{key:"before",value:function(e,t,i){var s=this;return this._sections.push({label:e,condition:function(){return s.time<t},callback:i}),this}},{key:"after",value:function(e,t,i){var s=this;return this._sections.push({label:e,condition:function(){return s.time>t},callback:i}),this}},{key:"between",value:function(e,t,i,s){var n=this;return this._sections.push({label:e,condition:function(){return n.time>t&&n.time<i},callback:s}),this}},{key:"onceAt",value:function(e,t,i){var s=this,n=null;return this._sections.push({label:e,condition:function(){return s.time>t&&!this.called},callback:function(){console.log("once :",n.label),i.call(this),n.called=!0},called:!1}),n=this._sections[this._sections.length-1],this}},{key:"getSpectrum",value:function(){return this.analyserNode.getByteFrequencyData(this.frequencyDataArray),this.frequencyDataArray}},{key:"getAverage",value:function(){for(var e=this.getSpectrum(),t=0,i=0,s=0;s<e.length;s++)i+=e[s],t++;return i/t}},{key:"getWaveform",value:function(){return this.analyserNode.getByteTimeDomainData(this.timeDomainDataArray),this.timeDomainDataArray}},{key:"getFrequency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,s=this.getSpectrum();if(void 0!==t){for(var n=e;n<=t;n++)i+=s[n];return i/(t-e+1)}return s[e]}},{key:"createKick",value:function(e){var t=e.frequency,i=e.threshold,s=e.decay,n=e.onKick,a=e.offKick,r=new o({frequency:t,threshold:i,decay:s,onKick:n,offKick:a});return this._kicks.push(r),r}},{key:"createBeat",value:function(e){var t=e.factor,i=e.onBeat,s=new r({factor:t,onBeat:i});return this._beats.push(s),s}},{key:"onUpdate",value:function(){this.req=requestAnimationFrame(this._onUpdate);for(var e in this._sections)this._sections[e].condition()&&this._sections[e].callback.call(this);var t=this.getSpectrum();for(var i in this._kicks)this._kicks[i].calc(t);var s=Math.max(0,this.time-this._offsetTime);for(var n in this._beats)this._beats[n].calc(s,this._beatDuration);this.debug&&this.debug.draw()}},{key:"onEnded",value:function(){this.isEnded=!0,console.log("console",this.isEnded),this.stop()}},{key:"progress",get:function(){return this._progress}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"duration",get:function(){return this._isLoaded?this._buffer.duration:0}},{key:"time",get:function(){return this.isPlaying?this.ctx.currentTime-this._startTime:this._pauseTime-this._startTime}},{key:"volume",set:function(e){this.gainNode.gain.value=e},get:function(){return this.gainNode.gain.value}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"smooth",get:function(){this._oldAverage||(this._oldAverage=this.getAverage()),this._newAverage=this.getAverage();var e=this._oldAverage+=1e-4*(this._oldAverage-this._newAverage);return this._oldAverage=this._newAverage,e}},{key:"beatDuration",get:function(){return this._beatDuration}}]),e}();t.default=a;var o=function(){function e(t){var i=t.frequency,n=t.threshold,a=t.decay,o=t.onKick,r=t.offKick;s(this,e),this.frequency=void 0!==i?i:[0,10],this.threshold=void 0!==n?n:.3,this.decay=void 0!==a?a:.02,this.onKick=o,this.offKick=r,this.isOn=!1,this.isKick=!1,this.currentThreshold=this.threshold}return n(e,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(e){var t=e.frequency,i=e.threshold,s=e.decay,n=e.onKick,a=e.offKick;this.frequency=void 0!==t?t:this.frequency,this.threshold=void 0!==i?i:this.threshold,this.decay=void 0!==s?s:this.decay,this.onKick=n||this.onKick,this.offKick=a||this.offKick}},{key:"calc",value:function(e){if(this.isOn){var t=this.maxAmplitude(e,this.frequency);t>=this.currentThreshold&&t>=this.threshold?(this.currentThreshold=t,this.onKick&&this.onKick(t),this.isKick=!0):(this.offKick&&this.offKick(t),this.currentThreshold-=this.decay,this.isKick=!1)}}},{key:"maxAmplitude",value:function(e,t){var i=0;if(!t.length)return t<e.length?e[~~t]:null;for(var s=t[0],n=t[1];s<=n;s++)e[s]>i&&(i=e[s]);return i}}]),e}(),r=function(){function e(t){var i=t.factor,n=t.onBeat;s(this,e),this.factor=void 0!==i?i:1,this.onBeat=n,this.isOn=!1,this.currentTime=0}return n(e,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(e){var t=e.factor,i=e.onBeat;this.factor=void 0!==t?t:this.factor,this.onBeat=i||this.onBeat}},{key:"calc",value:function(e,t){if(0!=e){var i=t*this.factor;e>=this.currentTime+i&&(this.isOn&&this.onBeat&&this.onBeat(),this.currentTime+=i)}}}]),e}(),h=function(){function e(t){s(this,e),this.sound=t,this.canvas=document.createElement("canvas"),this.canvas.width=512,this.canvas.height=300,this.canvas.style.position="absolute",this.canvas.style.bottom=0,this.canvas.style.left=0,this.canvas.style.zIndex=3,document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),window.addEventListener("resize",this.resize.bind(this),!1),this.resize()}return n(e,[{key:"resize",value:function(){this.canvas.width=window.innerWidth}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.strokeStyle="#a1a1a1",this.ctx.stroke(),this.ctx.beginPath();for(var e=this.sound.getSpectrum(),t=null,i=e.length,s=this.canvas.width/i,n=this.canvas.height-10,a=0;a<i;a++)t=e[a]/256,this.ctx.rect(a*s,n-n*t,s/2,n*t);this.ctx.fillStyle="#ffffff",this.ctx.fill(),this.ctx.beginPath(),this.ctx.font="10px Arial",this.ctx.textBaseline="middle",this.ctx.textAlign="left";for(var o=0,r=i;o<r;o++)o%10==0&&(this.ctx.rect(o*s,n,s/2,10),this.ctx.fillText(o,o*s+4,n+5));this.ctx.fillStyle="#ffffff",this.ctx.fill();for(var h=this.sound._kicks,c=null,l=h.length,u=null,d=null,f=0,m=l;f<m;f++)c=h[f],c.isOn&&(u=c.frequency.length?c.frequency[0]:c.frequency,d=c.frequency.length?c.frequency[1]-c.frequency[0]+1:1,this.ctx.beginPath(),this.ctx.rect(u*s,n-n*(c.threshold/256),d*s-.5*s,2),this.ctx.rect(u*s,n-n*(c.currentThreshold/256),d*s-.5*s,5),this.ctx.fillStyle=c.isKick?"#00ff00":"#ff0000",this.ctx.fill());this.ctx.beginPath();for(var y=this.sound.getWaveform(),p=null,v=y.length,g=this.canvas.width/v,w=this.canvas.height-10,x=0;x<v;x++)p=y[x]/256,0==x?this.ctx.moveTo(x*g,w*p):this.ctx.lineTo(x*g,w*p);this.ctx.strokeStyle="#0000ff",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.textAlign="right",this.ctx.textBaseline="top",this.ctx.font="15px Arial",this.ctx.fillStyle="#ffffff",this.ctx.fillText(Math.round(10*this.sound.time)/10+" / "+Math.round(10*this.sound.duration)/10,this.canvas.width-5,5),this.ctx.beginPath();for(var k=this.sound._sections,b=null,_=k.length,P="",A=0,M=_;A<M;A++)b=k[A],b.condition()&&(P+=b.label+" - ");P.length>0&&(P=P.substr(0,P.length-3)),this.ctx.fillText(P,this.canvas.width-5,25),this.ctx.fill()}}]),e}()},,,function(e,t,i){"use strict";(function(e){function s(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),o=i(9),r=s(o),h=i(10),c=s(h),l=i(11),u=s(l),d=i(12),f=s(d),m=i(13),y=s(m),p=i(1),v=s(p),g=i(7),w=s(g),x=i(15),k=s(x),b=i(14),_=s(b),P=i(8),A=s(P),M=i(3),z=(s(M),i(2)),N=(s(z),i(16)),L=(s(N),i(17)),T=(s(L),i(19)),q=(s(T),i(18)),S=(s(q),{amplitude:500,clearColor:2236962,scale:10,posXsea:0,posYsea:0,posZsea:0,seaColor:11184810,particlesFrame:1e-4,frame:.001,size:1,magnitude:1,nbParticles:1e3}),K=function(){function t(){var i=this;n(this,t),this.red=0,this.green=0,this.blue=0,this.end=!1,this.time2=0,this.mountainSize=1.5,this.textureLoader=new e.TextureLoader,this.texture=this.textureLoader.load(A.default),this.time=0,this.size=.2,this.center=new e.Vector2(0,0),this.frame=.001,this.materials=[],this.tab=[],this.magnitude=.2,this.mouseX=0,this.mouseY=0,this.container=document.querySelector("#main"),document.body.appendChild(this.container),this.camera=new e.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.1,1e4),this.camera.position.z=15,this.camera.position.y=15,this.audio=new v.default(w.default,102,.3,null,!0),this.kick=this.audio.createKick({frequency:3,decay:1,threshold:242,onKick:function(){i.mountainUp()},offKick:function(){i.mountainDown()}}),this.kick.on(),this.kick2=this.audio.createKick({frequency:220,decay:1,threshold:65,onKick:function(){i.randomBackground()},offKick:function(){}}),this.kick2.on(),this.audio._load(w.default,function(){i.audio.play()}),this.renderer=new e.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.container.appendChild(this.renderer.domElement),this.controls=new e.OrbitControls(this.camera,this.renderer.domElement),this.controls.addEventListener("change",this.render.bind(this)),this.controls.enableDamping=!0,this.controls.dampingFactor=.25,this.controls.enableZoom=!0,this.controls.maxPolarAngle=Math.PI/2.5,this.scene=new e.Scene,this.axisHelper=new e.AxisHelper,this.scene.add(this.axisHelper),this.onProgress=function(e){if(e.lengthComputable){e.loaded,e.total}},this.onError=function(e){},this.mtlLoader=new e.MTLLoader,this.mtlLoader.load(_.default,function(t){t.preload(),i.loader=new e.OBJLoader,i.loader.setMaterials(t),i.loader.load(k.default,function(t){i.mountain=t,i.mountain.scale.z=i.mountainSize,i.mountain.scale.x=i.mountainSize,i.mountain.scale.y=i.mountainSize,i.mountain.children[0].material[0]=new e.MeshLambertMaterial({color:5530761,emissive:4015191}),i.mountain.children[0].material[1]=new e.MeshLambertMaterial({color:7114948,emissive:11184810}),i.scene.add(t)},i.onProgress,i.onError)}),this.nbParticles=1e3,this.geometry=new e.PlaneGeometry(50,50,100,100),this.seaGeometry=new e.PlaneGeometry(50,50,50,50),this.sunGeometry=new e.SphereGeometry(5,32,32),this.geometryParticule=new e.Geometry,this.textureLoader=new e.TextureLoader;for(var s=this.textureLoader.load(r.default),a=this.textureLoader.load(c.default),o=this.textureLoader.load(u.default),h=this.textureLoader.load(f.default),l=this.textureLoader.load(y.default),d=0;d<this.nbParticles;d++){var m=new e.Vector3;m.x=2e3*Math.random()-1e3,m.y=2e3*Math.random()-1e3,m.z=2e3*Math.random()-1e3,this.geometryParticule.vertices.push(m)}for(this.parameters=[[[1,.2,.5],a,12],[[.95,.1,.5],o,5],[[.9,.05,.5],s,10],[[.85,0,.5],l,2],[[.8,0,.5],h,5]],d=0;d<this.parameters.length;d++)this.color=this.parameters[d][0],this.sprite=this.parameters[d][1],this.flowerSize=this.parameters[d][2],this.materials[d]=new e.PointsMaterial({size:this.flowerSize,map:this.sprite,blending:e.AdditiveBlending,depthTest:!1,transparent:!0}),this.materials[d].color.setHSL(this.color[0],this.color[1],this.color[2]),this.particles=new e.Points(this.geometryParticule,this.materials[d]),this.particles.rotation.x=10*Math.random()+2,this.particles.rotation.y=10*Math.random()+2,this.particles.rotation.z=10*Math.random()+2,this.tab.push(this.particles),this.scene.add(this.particles);this.directionalLight=new e.DirectionalLight(16777215,1),this.directionalLight.position.set(100,100,100),this.scene.add(this.directionalLight),this.material=new e.MeshLambertMaterial({color:16777215,emissive:0}),this.seaMaterial=new e.MeshLambertMaterial({color:S.seaColor,emissive:2454198,map:this.texture,wireframe:!1}),this.sea=new e.Mesh(this.seaGeometry,this.seaMaterial),this.sea.rotation.x=-Math.PI/2,this.sea.geometry.verticesNeedUpdate=!0,this.sea.position.y=1,this.seaVertices=this.sea.geometry.vertices,this.seaWaves(),this.seaGeometry.computeVertexNormals(),this.scene.add(this.sea),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.renderer.animate(this.render.bind(this))}return a(t,[{key:"mountainUp",value:function(){this.newMountainSize=2.2,this.mountainSize=this.newMountainSize,this.mountain.scale.y=this.mountainSize}},{key:"mountainDown",value:function(){this.mountainSize>1.5&&(this.mountainSize-=.01),this.mountain.scale.z=this.mountainSize,this.mountain.scale.x=this.mountainSize,this.mountain.scale.y=this.mountainSize}},{key:"seaWaves",value:function(){for(var t=0;t<this.seaVertices.length;t++)this.time+=.01,this.dist=new e.Vector2(this.seaVertices[t].x,this.seaVertices[t].y).sub(this.center),this.seaMaterial.map.needsUpdate=!0,this.seaGeometry.vertices.needsUpdate=!0,this.seaVertices[t].z=Math.sin(this.dist.length()/this.size+this.time/500)*this.magnitude}},{key:"randomBackground",value:function(){this.red=Math.floor(150*Math.random()+100),this.green=Math.floor(150*Math.random()+100),this.blue=Math.floor(150*Math.random()+100),S.clearColor="rgb("+this.red+","+this.green+","+this.blue+")"}},{key:"render",value:function(){1==this.audio.isEnded&&1!=this.end&&(this.end=!0,this.audio.pause()),this.time2+=.005,this.sea.geometry.verticesNeedUpdate=!0,this.average=Math.min(1,this.audio.smooth/144),this.magnitude=2*this.average*S.magnitude,this.seaWaves();var t=Date.now()*S.particlesFrame;for(this.camera.position.x=this.scene.position.x+35*Math.cos(this.time2),this.camera.position.z=this.scene.position.z+35*Math.sin(this.time2),this.camera.lookAt(this.scene.position),s=0;s<this.scene.children.length;s++){var i=this.scene.children[s];i instanceof e.Points&&(i.rotation.y=t*(s<4?s+1:-(s+1)))}for(var s=0;s<this.tab.length;s++)this.particles.position.x+=.052,this.particles.position.z+=.052;this.renderer.setClearColor(S.clearColor,1),this.renderer.render(this.scene,this.camera)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}]),t}();t.default=K}).call(t,i(0))},function(e,t){},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}i(5);var n=i(4),a=s(n),o=i(2),r=s(o),h=i(3),c=(s(h),i(1));s(c);window.app=new a.default,r.default.to(".loader",.5,{opacity:1,ease:Power0.easeNone}),r.default.to(".loader",.5,{opacity:0,ease:Power0.easeNone,delay:4}),r.default.to(".container",0,{opacity:1,ease:Power0.easeNone,delay:4}),r.default.to(".title",.5,{opacity:1,ease:Power0.easeNone,delay:4.5}),r.default.to(".category",.5,{opacity:1,ease:Power0.easeNone,delay:5}),r.default.to(".techno",.5,{opacity:1,ease:Power0.easeNone,delay:5.5}),r.default.to(".title",.5,{opacity:0,ease:Power0.easeNone,delay:7.5}),r.default.to(".category",.5,{opacity:0,ease:Power0.easeNone,delay:7.5}),r.default.to(".techno",.5,{opacity:0,ease:Power0.easeNone,delay:7.5}),r.default.to(".container",1,{opacity:0,ease:Power0.easeNone,delay:8}),r.default.to(".text",1,{opacity:0,ease:Power0.easeNone,delay:8}),r.default.to(".text",1,{display:"none",ease:Power0.easeNone,delay:8.5}),r.default.to(".contact",.5,{opacity:1,ease:Power0.easeNone,delay:8.5}),r.default.to("#main",.7,{opacity:1,ease:Power0.easeNone,delay:8.5}),1==window.app.end&&(console.log("hello"),r.default.to("#main",2,{opacity:0,ease:Power0.easeNone}),r.default.to("#main",2,{display:none,ease:Power0.easeNone,delay:1}))},function(e,t,i){e.exports=i.p+"assets/audio/sound_extract.mp3"},function(e,t,i){e.exports=i.p+"assets/img/p5.png"},function(e,t,i){e.exports=i.p+"assets/img/petale1.png"},function(e,t,i){e.exports=i.p+"assets/img/petale2.png"},function(e,t,i){e.exports=i.p+"assets/img/petale3.png"},function(e,t,i){e.exports=i.p+"assets/img/petale4.png"},function(e,t,i){e.exports=i.p+"assets/img/petale5.png"},function(e,t,i){e.exports=i.p+"assets/objects/fuji8.mtl"},function(e,t,i){e.exports=i.p+"assets/objects/fuji8.obj"}],[6]);