webpackJsonp([0],[,function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(7),r=n(a),c=i(6),h=n(c);i(10),i(9),i(12),i(11);var l=i(13),u=(n(l),i(14)),d=(n(u),i(8)),f=function(){function e(){s(this,e),this.ctx,this.canvas=document.createElement("canvas"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.canvas.style.position="absolute",this.canvas.style.zIndex=0,document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.container=document.querySelector("#main"),document.body.appendChild(this.container),this.camera=new t.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.set(0,0,-window.innerHeight/1.5),this.raycaster=new t.Raycaster,this.mouseVector=new t.Vector3(-50,-50,-50),this.scene=new t.Scene,this.scene.background=new t.Color(2171169),this.renderer=new t.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.container.appendChild(this.renderer.domElement),this.controls=new t.OrbitControls(this.camera,this.renderer.domElement),this.controls.zoomSpeed=.1,this.controls.enableDamping=!0,this.controls.dampingFactor=.8,this.controls.zoomSpeed=.3,this.controls.enableZoom=!1,this.controls.autoRotate=!0,console.log(this.controls),this.effect=new t.AnaglyphEffect(this.renderer),this.effect.setSize(window.innerWidth,window.innerHeight),this.effectAnaglyph=!0,this.allowWaveform=!1,window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),window.addEventListener("mousemove",this.onMouseMove.bind(this),!1),this.circlesTab=[],this.particulesTab=[],this.laps=0,this.init(),this.audio(),this.renderer.animate(this.render.bind(this))}return o(e,[{key:"init",value:function(){for(var e=new t.SphereGeometry(window.innerHeight/18,10,10),i=0;i<3;i++)for(var n=0;n<3;n++){var s=new t.MeshBasicMaterial({color:16777215,wireframe:!0,transparent:!0});this.circle=new t.Mesh(e,s),this.circle.position.x=-n*window.innerWidth/9+window.innerWidth/9,this.circle.position.y=-i*window.innerHeight/5+window.innerHeight/5,this.circle.material.opacity=.2,this.circle.name="circle",this.scene.add(this.circle),this.circlesTab.push(this.circle)}this.circlesTab[2].material.color.setHex(16721960),this.circlesTab[7].material.color.setHex(16721960),this.circlesTab[8].material.color.setHex(0)}},{key:"tweenOpacity",value:function(){var t=Math.floor(8*Math.random())+0;d.TweenMax.fromTo(this.circlesTab[t].material,.15,{opacity:.2},{opacity:1,onComplete:function(){d.TweenMax.fromTo(this.circlesTab[t].material,.15,{opacity:1},{opacity:.2})}.bind(this)})}},{key:"tweenScale",value:function(){var t=Math.floor(8*Math.random())+0;d.TweenMax.fromTo(this.circlesTab[t].scale,.01,{x:1,y:1,z:1},{x:1.5,y:1.5,z:1.5,ease:Power1.easeOut,onComplete:function(){d.TweenMax.fromTo(this.circlesTab[t].scale,.1,{x:1.5,y:1.5,z:1.5},{x:1,y:1,z:1,ease:Power1.easeOut})}.bind(this)}),d.TweenMax.fromTo(this.circlesTab[t].material,.01,{opacity:.2},{opacity:1,onComplete:function(){d.TweenMax.fromTo(this.circlesTab[t].material,.1,{opacity:1},{opacity:.2})}.bind(this)}),this.laps=0}},{key:"playEffectAnaglyph",value:function(t){this.effectAnaglyph=!1,TweenLite.delayedCall(t,function(){this.effectAnaglyph=!0}.bind(this))}},{key:"drawWaveform",value:function(t){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath();for(var e=t.getWaveform(),i=null,n=e.length/4,s=window.innerWidth/n,o=window.innerHeight,a=0;a<n;a++)i=e[a]/256,0==a?this.ctx.moveTo(a*s,o*i):this.ctx.lineTo(a*s,o*i);this.ctx.globalAlpha=.3,this.ctx.strokeStyle="#ffffff",this.ctx.stroke()}},{key:"drop",value:function(){for(var t=this,e=0;e<this.circlesTab.length;e++)!function(){var i=t.circlesTab[e];d.TweenMax.fromTo(i.material,.01,{opacity:.2},{opacity:1,onComplete:function(){d.TweenMax.fromTo(i.material,.1,{opacity:1},{opacity:.2})}}),d.TweenMax.fromTo(i.scale,.01,{x:1,y:1,z:1},{x:1.4,y:1.4,z:1.4,ease:Power1.easeOut,onComplete:function(){d.TweenMax.fromTo(i.scale,.1,{x:1.4,y:1.4,z:1.4},{x:1,y:1,z:1,ease:Power1.easeOut})}})}();this.laps=0}},{key:"drawParticules",value:function(){for(var e=new t.SphereGeometry(2,2,2),i=0;i<7;i++){var n=new t.MeshBasicMaterial({color:16777215,wireframe:!0,transparent:!0}),s=new t.Mesh(e,n);n.color.setRGB(255,255,255),s.position.set(Math.random()*(window.innerWidth- -window.innerWidth)-window.innerWidth,Math.random()*(window.innerWidth- -window.innerWidth)-window.innerWidth,-50),this.particulesTab.push(s),this.scene.add(s)}}},{key:"removeParticules",value:function(){for(var t=0;t<this.particulesTab.length;t++)this.scene.remove(this.particulesTab[t]),this.particulesTab.splice(t)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"onMouseMove",value:function(t){this.mouseVector.x=t.clientX/window.innerWidth*2-1,this.mouseVector.y=1-t.clientY/window.innerHeight*2}},{key:"audio",value:function(){var t=this;this.sound=new h.default(r.default,123,.5,function(){this.sound.play()}.bind(this),!1),this.beat=this.sound.createBeat({factor:.5,onBeat:function(){t.tweenOpacity()}}),this.beat.on(),this.kick=this.sound.createKick({frequency:[158,180],decay:1,threshold:144,onKick:function(){t.laps>10&&t.tweenScale()}}),this.kick.on(),this.sound.between("piano",8,14.5,function(){t.drawParticules()}),this.sound.onceAt("end piano",25,function(){t.removeParticules()}),this.dropBeat=this.sound.createBeat({factor:2,onBeat:function(){}}),this.dropKick=this.sound.createKick({frequency:[155,180],decay:60,threshold:148,onKick:function(){t.laps>10&&t.drop()}}),this.sound.onceAt("first kick",16,function(){t.drop()}),this.sound.onceAt("voice",23.5,function(){t.allowWaveform=!0}),this.sound.onceAt("drop",39.6,function(){t.kick.off(),t.beat.off(),t.dropKick.on(),t.dropBeat.on()}),this.sound.between("first drop",39.3,55,function(){t.drawParticules(),t.playEffectAnaglyph(15.7)}),this.sound.onceAt("end first drop",65,function(){t.removeParticules()}),this.sound.onceAt("first backToNormal",55,function(){t.kick.on(),t.beat.on(),t.dropKick.off(),t.dropBeat.off()}),this.sound.between("second drop",78.5,93,function(){t.drawParticules(),t.playEffectAnaglyph(16.7)}),this.sound.onceAt("end second drop",100,function(){t.removeParticules()}),this.sound.onceAt("second backToNormal",93,function(){t.kick.on(),t.beat.on(),t.dropKick.off(),t.dropBeat.off()})}},{key:"render",value:function(){Date.now();this.laps+=1;var e=new t.SpotLight(16777215);e.position.set(this.mouseVector.x,this.mouseVector.y,this.mouseVector.z),this.scene.add(e);for(var i=0;i<this.circlesTab.length;i++)this.circlesTab[i].rotation.y+=.01;for(var i=0;i<this.particulesTab.length;i++)this.particulesTab[i].position.z+=-2;this.allowWaveform&&this.drawWaveform(this.sound),this.raycaster.setFromCamera(this.mouseVector,this.camera);var n=this.raycaster.intersectObjects(this.scene.children);if(n.length>0&&n){n[0].object.name}this.effectAnaglyph?this.renderer.render(this.scene,this.camera):this.effect.render(this.scene,this.camera)}}]),e}();e.default=f}).call(e,i(0))},function(t,e,i){"use strict";Math.PI,Math.PI},function(t,e){},function(t,e){},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i(4),i(3);var s=i(1),o=n(s),a=i(2);n(a);window.onload=function(){function t(){document.getElementById("intro").style.display="none",document.getElementById("title").style.display="block",window.app=new o.default}document.getElementById("play").addEventListener("click",t)}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,i,s,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n(this,t),this.ctx;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.ctx=new AudioContext}catch(t){throw new Error("Web Audio API is not supported in this browser")}this._bpm=i,this._beatDuration=60/this._bpm,this._offsetTime=s,this._sections=[],this._kicks=[],this._beats=[],this._startTime=0,this._pauseTime=0,this._isPlaying=!1,this._isLoaded=!1,this._progress=0,this._onUpdate=this.onUpdate.bind(this),this._onEnded=this.onEnded.bind(this),this.gainNode=this.ctx.createGain(),this.gainNode.connect(this.ctx.destination),this.analyserNode=this.ctx.createAnalyser(),this.analyserNode.connect(this.gainNode),this.analyserNode.smoothingTimeConstant=.8,this.analyserNode.fftSize=512;var r=this.analyserNode.frequencyBinCount;this.frequencyDataArray=new Uint8Array(r),this.timeDomainDataArray=new Uint8Array(r),a&&(this.debug=new c(this)),this._load(e,o),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame}return s(t,[{key:"_load",value:function(t,e){var i=this;if(t){this._isLoaded=!1,this._progress=0;var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onprogress=function(t){i._progress=t.loaded/t.total},n.onload=function(){i.ctx.decodeAudioData(n.response,function(t){i._buffer=t,i._isLoaded=!0,e&&e()},function(t){console.log(t)})},n.send()}}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.req&&cancelAnimationFrame(this.req),this._onUpdate(),this._isPlaying=!0;var e=this._pauseTime-this._startTime+t;this._startTime=this.ctx.currentTime-e,this.sourceNode=this.ctx.createBufferSource(),this.sourceNode.connect(this.analyserNode),this.sourceNode.buffer=this._buffer,this.sourceNode.start(0,e),this.sourceNode.addEventListener("ended",this._onEnded,!1)}},{key:"pause",value:function(){this.req&&cancelAnimationFrame(this.req),this.sourceNode&&(this.sourceNode.removeEventListener("ended",this._onEnded,!1),this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode=null),this._pauseTime=this.ctx.currentTime,this._isPlaying=!1}},{key:"before",value:function(t,e,i){var n=this;return this._sections.push({label:t,condition:function(){return n.time<e},callback:i}),this}},{key:"after",value:function(t,e,i){var n=this;return this._sections.push({label:t,condition:function(){return n.time>e},callback:i}),this}},{key:"between",value:function(t,e,i,n){var s=this;return this._sections.push({label:t,condition:function(){return s.time>e&&s.time<i},callback:n}),this}},{key:"onceAt",value:function(t,e,i){var n=this,s=null;return this._sections.push({label:t,condition:function(){return n.time>e&&!this.called},callback:function(){console.log("once :",s.label),i.call(this),s.called=!0},called:!1}),s=this._sections[this._sections.length-1],this}},{key:"getSpectrum",value:function(){return this.analyserNode.getByteFrequencyData(this.frequencyDataArray),this.frequencyDataArray}},{key:"getWaveform",value:function(){return this.analyserNode.getByteTimeDomainData(this.timeDomainDataArray),this.timeDomainDataArray}},{key:"getFrequency",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,n=this.getSpectrum();if(void 0!==e){for(var s=t;s<=e;s++)i+=n[s];return i/(e-t+1)}return n[t]}},{key:"createKick",value:function(t){var e=t.frequency,i=t.threshold,n=t.decay,s=t.onKick,o=t.offKick,r=new a({frequency:e,threshold:i,decay:n,onKick:s,offKick:o});return this._kicks.push(r),r}},{key:"createBeat",value:function(t){var e=t.factor,i=t.onBeat,n=new r({factor:e,onBeat:i});return this._beats.push(n),n}},{key:"onUpdate",value:function(){this.req=requestAnimationFrame(this._onUpdate);for(var t in this._sections)this._sections[t].condition()&&this._sections[t].callback.call(this);var e=this.getSpectrum();for(var i in this._kicks)this._kicks[i].calc(e);var n=Math.max(0,this.time-this._offsetTime);for(var s in this._beats)this._beats[s].calc(n,this._beatDuration);this.debug&&this.debug.draw()}},{key:"onEnded",value:function(){this.stop()}},{key:"progress",get:function(){return this._progress}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"duration",get:function(){return this._isLoaded?this._buffer.duration:0}},{key:"time",get:function(){return this.isPlaying?this.ctx.currentTime-this._startTime:this._pauseTime-this._startTime}},{key:"volume",set:function(t){this.gainNode.gain.value=t},get:function(){return this.gainNode.gain.value}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"beatDuration",get:function(){return this._beatDuration}}]),t}();e.default=o;var a=function(){function t(e){var i=e.frequency,s=e.threshold,o=e.decay,a=e.onKick,r=e.offKick;n(this,t),this.frequency=void 0!==i?i:[0,10],this.threshold=void 0!==s?s:.3,this.decay=void 0!==o?o:.02,this.onKick=a,this.offKick=r,this.isOn=!1,this.isKick=!1,this.currentThreshold=this.threshold}return s(t,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(t){var e=t.frequency,i=t.threshold,n=t.decay,s=t.onKick,o=t.offKick;this.frequency=void 0!==e?e:this.frequency,this.threshold=void 0!==i?i:this.threshold,this.decay=void 0!==n?n:this.decay,this.onKick=s||this.onKick,this.offKick=o||this.offKick}},{key:"calc",value:function(t){if(this.isOn){var e=this.maxAmplitude(t,this.frequency);e>=this.currentThreshold&&e>=this.threshold?(this.currentThreshold=e,this.onKick&&this.onKick(e),this.isKick=!0):(this.offKick&&this.offKick(e),this.currentThreshold-=this.decay,this.isKick=!1)}}},{key:"maxAmplitude",value:function(t,e){var i=0;if(!e.length)return e<t.length?t[~~e]:null;for(var n=e[0],s=e[1];n<=s;n++)t[n]>i&&(i=t[n]);return i}}]),t}(),r=function(){function t(e){var i=e.factor,s=e.onBeat;n(this,t),this.factor=void 0!==i?i:1,this.onBeat=s,this.isOn=!1,this.currentTime=0}return s(t,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(t){var e=t.factor,i=t.onBeat;this.factor=void 0!==e?e:this.factor,this.onBeat=i||this.onBeat}},{key:"calc",value:function(t,e){if(0!=t){var i=e*this.factor;t>=this.currentTime+i&&(this.isOn&&this.onBeat&&this.onBeat(),this.currentTime+=i)}}}]),t}(),c=function(){function t(e){n(this,t),this.sound=e,this.canvas=document.createElement("canvas"),this.canvas.width=512,this.canvas.height=300,this.canvas.style.position="absolute",this.canvas.style.bottom=0,this.canvas.style.left=0,this.canvas.style.zIndex=3,document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),window.addEventListener("resize",this.resize.bind(this),!1),this.resize()}return s(t,[{key:"resize",value:function(){this.canvas.width=window.innerWidth}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.strokeStyle="#a1a1a1",this.ctx.stroke(),this.ctx.beginPath();for(var t=this.sound.getSpectrum(),e=null,i=t.length,n=this.canvas.width/i,s=this.canvas.height-10,o=0;o<i;o++)e=t[o]/256,this.ctx.rect(o*n,s-s*e,n/2,s*e);this.ctx.fillStyle="#ffffff",this.ctx.fill(),this.ctx.beginPath(),this.ctx.font="10px Arial",this.ctx.textBaseline="middle",this.ctx.textAlign="left";for(var a=0,r=i;a<r;a++)a%10==0&&(this.ctx.rect(a*n,s,n/2,10),this.ctx.fillText(a,a*n+4,s+5));this.ctx.fillStyle="#ffffff",this.ctx.fill();for(var c=this.sound._kicks,h=null,l=c.length,u=null,d=null,f=0,y=l;f<y;f++)h=c[f],h.isOn&&(u=h.frequency.length?h.frequency[0]:h.frequency,d=h.frequency.length?h.frequency[1]-h.frequency[0]+1:1,this.ctx.beginPath(),this.ctx.rect(u*n,s-s*(h.threshold/256),d*n-.5*n,2),this.ctx.rect(u*n,s-s*(h.currentThreshold/256),d*n-.5*n,5),this.ctx.fillStyle=h.isKick?"#00ff00":"#ff0000",this.ctx.fill());this.ctx.beginPath();for(var m=this.sound.getWaveform(),w=null,v=m.length,p=this.canvas.width/v,g=this.canvas.height-10,k=0;k<v;k++)w=m[k]/256,0==k?this.ctx.moveTo(k*p,g*w):this.ctx.lineTo(k*p,g*w);this.ctx.strokeStyle="#0000ff",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.textAlign="right",this.ctx.textBaseline="top",this.ctx.font="15px Arial",this.ctx.fillStyle="#ffffff",this.ctx.fillText(Math.round(10*this.sound.time)/10+" / "+Math.round(10*this.sound.duration)/10,this.canvas.width-5,5),this.ctx.beginPath();for(var b=this.sound._sections,x=null,T=b.length,_="",A=0,P=T;A<P;A++)x=b[A],x.condition()&&(_+=x.label+" - ");_.length>0&&(_=_.substr(0,_.length-3)),this.ctx.fillText(_,this.canvas.width-5,25),this.ctx.fill()}}]),t}()},function(t,e,i){t.exports=i.p+"sounds/sound.1f7318e2333be10d1de805e9dcdf50e4.mp3"},,,,,,function(t,e){t.exports="void main() {\n    gl_FragColor = vec4(1, 0, 0, 1);\n}"},function(t,e){t.exports="void main() {\n    gl_Position = vec4(position, 1);\n}"}],[5]);