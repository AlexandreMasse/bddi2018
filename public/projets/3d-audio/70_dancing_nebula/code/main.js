webpackJsonp([0],[,function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(8),o=i(s),u=n(6),l=i(u),c=n(9),f=i(c),h=n(7),d=i(h),p=function(){function t(){var n=this;a(this,t),this.container=document.getElementById("main"),this.input=document.querySelector(".input"),this.default=document.querySelector(".default"),this.camera=new e.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this.scene=new e.Scene,this.renderer=new e.WebGLRenderer({antialias:!0,preserveDrawingBuffer:!0}),this.controls=new f.default(this.camera,this.renderer.domElement),this.time=0,this.piFactor=.02,this.radiusMagnitudeFactor=0,this.radiusCameraFactor=0,this.soundApi=new l.default(this.render.bind(this),this.freeze.bind(this)),this.ui=new d.default(this),this.simplex=new o.default,this.soundApi.on("startload",function(e){n.ui.loading=!0}),this.soundApi.on("load",function(e){n.ui.loading=!1}),this.camera.position.set(2.5,2.5,2.5),this.controls.enableZoom=!0,this.renderer.autoClearColor=!1,this.renderer.setPixelRatio(window.devicePixelRatio),this.container.appendChild(this.renderer.domElement),this.uniforms={amount:{type:"f",value:50},resolution:{type:"f",value:500},radius:{type:"f",value:1},average:{type:"f",value:0},time:{type:"f",value:0},thetaFactor:{type:"f",value:0}},this.mesh=new e.Line(new e.BufferGeometry,new e.ShaderMaterial({uniforms:this.uniforms,vertexShader:document.getElementById("vertexshader").textContent,fragmentShader:document.getElementById("fragmentshader").textContent,transparent:!0})),this.clearer=new e.Mesh(new e.BufferGeometry,new e.ShaderMaterial({uniforms:this.uniforms,vertexShader:document.getElementById("clear-vertexshader").textContent,fragmentShader:document.getElementById("clear-fragmentshader").textContent,transparent:!0,side:e.DoubleSide})),this.clearer.geometry.addAttribute("position",new e.BufferAttribute(new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0]),3)),this.clearer.geometry.setIndex(new e.BufferAttribute(new Uint32Array([0,1,2,3,0,2]),1)),this.resize(),window.addEventListener("resize",this.resize.bind(this),!1),this.reset(),this.scene.add(this.clearer),this.scene.add(this.mesh)}return r(t,[{key:"magnitude",value:function(e){return this.soundApi.data[Math.floor((this.uniforms.resolution.value-e%this.uniforms.resolution.value)/this.uniforms.resolution.value*900)]*this.radiusMagnitudeFactor}},{key:"reset",value:function(){for(var t=[],n=0;n<this.uniforms.amount.value;n++)for(var i=0;i<this.uniforms.resolution.value;i++)t.push(n,i,0);this.mesh.geometry.addAttribute("position",new e.BufferAttribute(new Float32Array(t),3)),this.uniforms.thetaFactor.value=1/((this.uniforms.resolution.value+this.uniforms.amount.value)*Math.PI*this.piFactor),this.mesh.geometry.attributes.position.needsUpdate=!0,this.radiusMagnitudeFactor=this.uniforms.radius.value/2e3,this.radiusCameraFactor=2.5*this.uniforms.radius.value}},{key:"update",value:function(){for(var e,t=this.mesh.geometry.getAttribute("position").array,n=0,i=0;i<this.uniforms.resolution.value;i++){e=this.magnitude(i),n+=e;for(var a=0;a<this.uniforms.amount.value;a++)t[3*(a*this.uniforms.resolution.value+i)+2]=e}this.uniforms.average.value=n/this.uniforms.resolution.value,this.uniforms.time.value+=1,this.mesh.geometry.attributes.position.needsUpdate=!0}},{key:"render",value:function(){this.soundApi.update(),this.update();var t=this.uniforms.time.value/900;this.camera.position.set(this.simplex.noise2D(0,t)*this.radiusCameraFactor,this.simplex.noise2D(1,t)*this.radiusCameraFactor,this.simplex.noise2D(2,t)*this.radiusCameraFactor);var n=this.camera.rotation.z;this.camera.lookAt(new e.Vector3(0,0,0)),this.camera.rotation.z=n+.005,this.renderer.render(this.scene,this.camera),this.frameRequest=window.requestAnimationFrame(this.render.bind(this))}},{key:"freeze",value:function(){window.cancelAnimationFrame(this.frameRequest)}},{key:"resize",value:function(){this.renderer.setSize(window.innerWidth,window.innerHeight)}}]),t}();t.default=p}).call(t,n(0))},function(e,t){},function(e,t,n){"use strict";n(2);var i=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(i);window.app=new a.default},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function e(t,n){i(this,e),this.type=t,this.data=n;var a=!1;this.stopPropagation=function(){a=!0},Object.defineProperties(this,{propagationStopped:{get:function(){return a}}});for(var r in n)void 0===this[r]&&(this[r]=n[r])};t.default=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(4),s=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(){function e(){i(this,e),this.handlers=[],this.dispatchedEvents={}}return a(e,[{key:"available",value:function(e){return Array.isArray(this.handlers[e])}},{key:"get",value:function(e){return this.available(e)||(this.handlers[e]=[]),this.handlers[e]}},{key:"each",value:function(e,t){e=(e+"").split(" ");for(var n,i=0;i<e.length;i++)(n=e[i].trim())&&t.call(this,n)}},{key:"on",value:function(e,t){this.each(e,function(e){this.get(e).push(t)})}},{key:"off",value:function(e,t){var n,i;this.each(e,function(e){this.available(e)&&(n=this.get(e),-1!==(i=n.indexOf(t))&&(this.handlers[e]=n.slice(0,i).concat(n.slice(i+1))))})}},{key:"count",value:function(e,t,n){if("number"!=typeof e&&(e=1),0===e)n.call(this);else{var i=0;countCallback=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(a){i++,i>=e&&(n.call(this,a),this.off(t,countCallback))}),this.on(t,countCallback)}}},{key:"associate",value:function(e,t,n){this.count(n,e,function(e){this.dispatch(t,e)})}},{key:"once",value:function(e,t){this.count(1,e,t)}},{key:"require",value:function(e,t){var n=this.dispatched(e);n?t.call(this,n):this.once(e,t)}},{key:"dispatch",value:function(e,t){var n,i;this.each(e,function(e){n=this.get(e),i=e,e=t instanceof s.default?t:new s.default(e,t),"string"==typeof i&&(e.type=i),this.dispatchedEvents[e.type]=e||!0;for(var a=0;a<n.length&&(n[a].call(this,e),!e.propagationStopped);a++);})}},{key:"dispatched",value:function(e){var t=!1;return this.each(e,function(e){return t=!!this.dispatchedEvents[e],t}),t}},{key:"defer",value:function(e){return this.assign("on",e),this.assign("off",e),this.assign("once",e),this.assign("count",e),this.assign("require",e),this.assign("dispatch",e),this.assign("associate",e),this.assign("dispatched",e,!1),this}},{key:"assign",value:function(e,t,n){var i=this;void 0===n&&(n=!0),t[e]=function(){var a=i[e].apply(i,Array.prototype.map.call(arguments,function(e){return"function"==typeof e?function(){return e.apply(t,Array.prototype.slice.call(arguments))}:e}));return n?t:a}}}],[{key:"defer",value:function(t){return(new e).defer(t)}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(5),o=function(e){return e&&e.__esModule?e:{default:e}}(s);window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext;var u=function(){function e(t,n){var a=this;i(this,e),o.default.defer(this),this.input=document.createElement("input"),this.input.type="file",this.source=null,this.data=null,this._file=null,this.defaultSound="Thundercat - Friend Zone.mp3",this.audioContext=new AudioContext,this.input.addEventListener("change",function(e){var t=e.target.files[0];t&&(a.stop(),null!==t.type.match(/^audio\//)?(a.file=t,e.target.value=null):a.dispatch("error",{message:"Invalid file type"}))}),"function"==typeof t&&this.on("play",t),"function"==typeof n&&this.on("stop",n)}return r(e,[{key:"default",value:function(){var e=this,t=new XMLHttpRequest;t.open("GET","sounds/"+window.encodeURIComponent(this.defaultSound),!0),t.responseType="arraybuffer",t.addEventListener("load",function(){e.file={name:e.defaultSound,default:!0},e.decode(t.response)}),t.send()}},{key:"read",value:function(){var e=this,t=new FileReader;t.addEventListener("load",function(t){return e.decode(t.target.result)}),t.readAsArrayBuffer(this.file)}},{key:"decode",value:function(e){var t=this;this.audioContext.decodeAudioData(e,function(e){t.play(e),t.dispatch("load")})}},{key:"update",value:function(){this.analyser.getByteFrequencyData(this.data)}},{key:"play",value:function(e){var t=this,n=this.audioContext.createBufferSource();this.analyser=this.audioContext.createAnalyser(),this.data=new Uint8Array(this.analyser.frequencyBinCount),n.connect(this.analyser),this.analyser.connect(this.audioContext.destination),n.buffer=e,n.start||(n.start=n.noteOn,n.stop=n.noteOff),null!==this.source&&this.stop(),n.start(0),this.source=n,n.addEventListener("ended",function(){return t.stop()}),this.dispatch("play",{file:this.file})}},{key:"stop",value:function(){null!==this.source&&(this.source.stop(0),this.source=null,this.dispatch("stop"))}},{key:"file",get:function(){return this._file},set:function(e){e instanceof File||"object"===(void 0===e?"undefined":a(e))&&null!==e&&e.default?(this._file=e,this.dispatch("startload"),e.default||this.read()):this._file=null}}]),e}();t.default=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var n=this;i(this,e),this.app=t,this.input=document.querySelector(".input"),this.default=document.querySelector(".default"),this.spinner=document.querySelector(".spinner"),this.app.soundApi.on("play",function(e){n.input.textContent=n.fileName(e.file)}),this.app.soundApi.on("stop",function(e){n.input.textContent="Choose a song"}),this.app.soundApi.on("error",function(e){n.input.textContent=e.message}),this.default.addEventListener("click",function(e){n.app.soundApi.default()}),this.input.addEventListener("click",function(e){n.app.soundApi.input.click()}),document.body.appendChild(this.app.soundApi.input)}return a(e,[{key:"fileName",value:function(e){return e.name.replace(/^\d+\s/,"").replace(/\.[^\.]+$/,"")}},{key:"loading",get:function(){return null!==this.spinner.className.match(/\bspinner--loading\b/)},set:function(e){(e=!!e)!==this.loading&&(e?this.spinner.className+=" spinner--loading":this.spinner.className=this.spinner.className.replace(/\bspinner--loading\b/,""))}}]),e}();t.default=r}],[3]);