webpackJsonp([0],[function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(e,"__esModule",{value:!0}),e.sounds=void 0;var r=t(29),s=i(r),o=t(30),a=i(o),c=t(12),d=i(c),l=t(14),h=i(l),u=t(15),f=i(u),m=t(16),p=i(m),y=t(11),v=i(y),g=t(13),b=i(g),w=t(24),k=i(w),x=t(26),_=i(x),N=t(27),E=i(N),S=t(28),q=i(S),A=t(23),P=i(A),C=t(25),L=i(C),z=t(18),T=i(z),O=t(20),F=i(O),I=t(21),D=i(I),B=t(22),M=i(B),R=t(17),K=i(R),H=t(19),j=i(H);e.sounds={drums:{drums:s.default,drums2:a.default},notes:["c4Note","dSharpNote","fNote","gNote","aSharpNote","c5Note"],instruments:{odrenka:{c4Note:d.default,dSharpNote:h.default,fNote:f.default,gNote:p.default,aSharpNote:v.default,c5Note:b.default},violins:{c4Note:k.default,dSharpNote:_.default,fNote:E.default,gNote:q.default,aSharpNote:P.default,c5Note:L.default},trancy:{c4Note:T.default,dSharpNote:F.default,fNote:D.default,gNote:M.default,aSharpNote:K.default,c5Note:j.default}},themes:{odrenka:"red",violins:"violet",trancy:"blue"}}},,function(n,e,t){"use strict";function i(n){return n&&n.__esModule?n:{default:n}}function r(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),o=t(6),a=i(o),c=t(1),d=function(n){if(n&&n.__esModule)return n;var e={};if(null!=n)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}(c),l=t(0),h=t(7),u=i(h),f=(t(33)(d),function(){function n(){r(this,n),console.log(l.sounds),this.scene=new d.Scene,this.players={},this.camera=new d.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.05,1e4),this.camera.position.set(0,-14,9),this.camera.rotation.set(1.5,4.4,0),this.camera=new d.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.05,1e4),this.camera.position.z=200,this.notesContainer=window.document.querySelector(".notes"),this.controls=window.document.querySelector(".controls"),this.drumsButtons=window.document.querySelectorAll(".percussions-button"),this.instrumentsButtons=window.document.querySelectorAll(".instruments-button"),this.toggleOverlayButton=window.document.querySelector("#toggleOverlay"),this.drums="drums2",this.instrument="odrenka",this.theme=l.sounds.themes[this.selectedInstruments],window.camera=this.camera,window.THREE=d,this.container=document.querySelector("#main"),document.body.appendChild(this.container);var e=new d.AmbientLight("white",1);e.name="Ambient Light";var t=new d.DirectionalLight("white",1);t.name="Directional Light",this.scene.add(t,e),this.renderer=new d.WebGLRenderer({alpha:!0,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.container.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.registerPlayers(),this.registerEventListeners(),this.renderer.animate(this.render.bind(this))}return s(n,[{key:"render",value:function(){this.renderer.render(this.scene,this.camera),this.player.update()}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"changeSounds",value:function(n,e){var t=this;this.drumsButtons.forEach(function(n){n.disabled=!0}),this.instrumentsButtons.forEach(function(n){n.disabled=!0}),this.drums=n,this.instrument=e,this.theme=l.sounds.themes[this.selectedInstruments],this.getDrumsPlayer().reload(l.sounds.drums[n],function(){var n=!0,i=!1,r=void 0;try{for(var s,o=l.sounds.notes[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=s.value;!function(n){var i=n+"Player";t.players[i].reload(l.sounds.instruments[e][n],function(){t.players[i].play()})}(a)}}catch(n){i=!0,r=n}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}t.getDrumsPlayer().play(),t.drumsButtons.forEach(function(n){n.disabled=!1}),t.instrumentsButtons.forEach(function(n){n.disabled=!1})})}},{key:"registerPlayers",value:function(){this.registerDrumsPlayers(),this.registerInstrumentsPlayers(),this.player=new a.default(this.scene,this.camera,this.renderer,this.players)}},{key:"registerDrumsPlayers",value:function(){var n=this;this.players.drumsPlayer=new u.default(l.sounds.drums[this.selectedDrums],140,0,function(){n.getDrumsPlayer().createKick({frequency:3,decay:.33,onKick:function(){n.notesContainer.classList.add("kicking"),n.notesContainer.classList.contains("kicking")&&setTimeout(function(){n.notesContainer.classList.remove("kicking")},200)}}).on(),n.players.drumsPlayer.loopEnd=13.71},!1,!1)}},{key:"registerInstrumentsPlayers",value:function(){var n=this,e=!0,t=!1,i=void 0;try{for(var r,s=l.sounds.notes[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var o=r.value;!function(e){var t=e+"Player";n.players[t]=new u.default(l.sounds.instruments[n.selectedInstruments][e],140,0,function(){n.players[t].volume=0})}(o)}}catch(n){t=!0,i=n}finally{try{!e&&s.return&&s.return()}finally{if(t)throw i}}}},{key:"playSounds",value:function(){for(var n in this.players)this.players[n].play();this.container.classList.add("visible")}},{key:"getDrumsPlayer",value:function(){return this.players.drumsPlayer}},{key:"registerEventListeners",value:function(){var n=this;this.toggleOverlayButton.addEventListener("click",function(e){n.toggleOverlay()}),this.drumsButtons.forEach(function(e){e.addEventListener("click",function(e){n.changeSounds(e.target.dataset.drums,n.selectedInstruments)})}),this.instrumentsButtons.forEach(function(e){e.addEventListener("click",function(e){n.changeSounds(n.selectedDrums,e.target.dataset.instrument)})}),window.addEventListener("keyup",function(e){switch(e.keyCode){case 83:n.toggleOverlay()}})}},{key:"toggleOverlay",value:function(){this.controls.classList.contains("visible")?(this.controls.classList.remove("visible"),this.controls.classList.add("hidden"),this.toggleOverlayButton.innerHTML=">"):(this.controls.classList.remove("hidden"),this.controls.classList.add("visible"),this.toggleOverlayButton.innerHTML="<")}},{key:"theme",set:function(n){this._theme=n,document.body.setAttribute("class",""),document.body.classList.add("theme-"+n),this.player&&this.player.mesh.material.color.set(this.theme)},get:function(){return this._theme}},{key:"drums",set:function(n){this.selectedDrums=n,this.drumsButtons.forEach(function(e){e.classList.remove("active"),e.dataset.drums===n&&e.classList.add("active")})},get:function(){return this.selectedDrums}},{key:"instrument",set:function(n){this.selectedInstruments=n,this.instrumentsButtons.forEach(function(e){e.classList.remove("active"),e.dataset.instrument===n&&e.classList.add("active")})},get:function(){return this.selectedInstruments}}]),n}());e.default=f},function(n,e,t){"use strict";Number.prototype.clamp=function(n,e){return Math.min(Math.max(this,n),e)}},function(n,e,t){n.exports=t.p+"assets/images/loader.svg"},function(n,e,t){var i=t(9);"string"==typeof i&&(i=[[n.i,i,""]]);var r={hmr:!0};r.transform=void 0;t(31)(i,r);i.locals&&(n.exports=i.locals)},function(n,e,t){"use strict";function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),s=t(1),o=function(n){if(n&&n.__esModule)return n;var e={};if(null!=n)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}(s),a={65:"c4",90:"dSharp",69:"f",82:"g",84:"aSharp",89:"c5"},c=function(){function n(e,t,r,s,a){i(this,n);var c={color:"red",wireframe:!1,flatShading:!0};this.isClicking=!1,this.isPressing=!1,this.notes=[],this.options=Object.assign({},c,a),this.mouse=new o.Vector2(0,0),this.scene=e,this.renderer=r,this.camera=t,this.players=s;var d=new o.MeshStandardMaterial({roughness:1,metalness:.5,color:this.options.color,wireframe:this.options.wireframe,flatShading:this.options.flatShading}),l=new o.IcosahedronGeometry(10,1);this.mesh=new o.Mesh(l,d),this.registerEventsListener(),this.render()}return r(n,[{key:"render",value:function(){this.scene.add(this.mesh)}},{key:"update",value:function(){console.log(this.notes),this.isPressing&&this.notes.length>0?(this.reactToDrums(),this.playNotes(this.notes)):this.isClicking?this.playCorrespondingNote():(this.mesh.scale.set(1,1,1),this.stopNotes())}},{key:"getCurrentNote",value:function(){var n=this.toScreenPosition(this.mesh,this.camera);return n.y<window.innerHeight/6?"c5":n.y<window.innerHeight/6*2?"aSharp":n.y<window.innerHeight/6*3?"g":n.y<window.innerHeight/6*4?"f":n.y<window.innerHeight/6*5?"dSharp":"c4"}},{key:"getDrumsPlayer",value:function(){return this.players.drumsPlayer}},{key:"getPlayerOfNote",value:function(n){return this.players[n+"NotePlayer"]}},{key:"playCorrespondingNote",value:function(){var n=this.getCurrentNote();this.playNote(n)}},{key:"playNotes",value:function(n){this.stopNotes(n);var e=this.toScreenPosition(this.mesh,this.camera),t=!0,i=!1,r=void 0;try{for(var s,o=n[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var a=s.value;this.getPlayerOfNote(a).filterFrequency=5*e.x}}catch(n){i=!0,r=n}finally{try{!t&&o.return&&o.return()}finally{if(i)throw r}}this.reactToCurrentNote(n[0])}},{key:"playNote",value:function(n){this.stopNotes([n]);var e=this.toScreenPosition(this.mesh,this.camera);this.getPlayerOfNote(n).filterFrequency=5*e.x,this.reactToCurrentNote(n)}},{key:"stopNotes",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(var e in this.players)!this.players.hasOwnProperty(e)||e.includes("drums")||n.join(" ").includes(e.replace("NotePlayer",""))?this.players[e].volume=1:this.players[e].volume=0}},{key:"toScreenPosition",value:function(n,e){var t=new o.Vector3,i=.5*this.renderer.context.canvas.width,r=.5*this.renderer.context.canvas.height;return n.updateMatrixWorld(),t.setFromMatrixPosition(n.matrixWorld),t.project(e),t.x=t.x*i+i,t.y=-t.y*r+r,{x:t.x,y:t.y}}},{key:"registerEventsListener",value:function(){var n=this;this.renderer.context.canvas.addEventListener("mousemove",this.onMouseMove.bind(this)),this.renderer.context.canvas.addEventListener("mousedown",function(e){n.isClicking=!0}),this.renderer.context.canvas.addEventListener("mouseup",function(e){n.isClicking=!1}),window.addEventListener("keydown",function(e){if(console.log(e),[65,90,69,82,84,89].includes(e.keyCode)){n.isPressing=!0;var t=a[e.keyCode];n.notes.includes(t)||n.notes.push(t)}}),window.addEventListener("keyup",function(e){n.notes=n.notes.filter(function(n){return n!==a[e.keyCode]}),0===n.notes.length&&(n.isPressing=!1)})}},{key:"onMouseMove",value:function(n){n.preventDefault(),this.mouse.x=event.clientX/window.innerWidth*2-1,this.mouse.y=-event.clientY/window.innerHeight*2+1;var e=new o.Vector3(this.mouse.x,this.mouse.y,.5);e.unproject(this.camera);var t=e.sub(this.camera.position).normalize(),i=-this.camera.position.z/t.z,r=this.camera.position.clone().add(t.multiplyScalar(i));this.mesh.position.copy(r)}},{key:"reactToDrums",value:function(){var n=this.getDrumsPlayer().getFrequency(0,255)/100;0!==n&&this.mesh.scale.set(n,n,n)}},{key:"reactToCurrentNote",value:function(n){var e=this.getPlayerOfNote(n).getFrequency(0,255)/50;0!==e&&this.mesh.scale.set(e,e,e)}}]),n}();e.default=c},function(n,e,t){"use strict";function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),s=function(){function n(e,t,r,s){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],d=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];i(this,n),this.ctx=window.ctx||null;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,window.ctx=window.ctx||new AudioContext,this.ctx=window.ctx}catch(n){throw new Error("Web Audio API is not supported in this browser")}this._isFiltered=a,this._loop=d,this._loopStart=null,this._loopEnd=null,this._bpm=t,this._beatDuration=60/this._bpm,this._offsetTime=r,this._sections=[],this._kicks=[],this._beats=[],this._startTime=0,this._pauseTime=0,this._isPlaying=!1,this._isLoaded=!1,this._progress=0,this._onUpdate=this.onUpdate.bind(this),this._onEnded=this.onEnded.bind(this),this.gainNode=this.ctx.createGain(),this.gainNode.connect(this.ctx.destination),this.analyserNode=this.ctx.createAnalyser(),this.analyserNode.connect(this.gainNode),this.analyserNode.smoothingTimeConstant=.8,this.analyserNode.fftSize=512;var l=this.analyserNode.frequencyBinCount;this.frequencyDataArray=new Uint8Array(l),this.timeDomainDataArray=new Uint8Array(l),this.biquadFilterNode=this.ctx.createBiquadFilter(),this.biquadFilterNode.type="lowpass",this.biquadFilterNode.frequency.value=600,this.biquadFilterNode.connect(this.analyserNode),o&&(this.debug=new c(this)),this._load(e,s),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame}return r(n,[{key:"loopEnd",get:function(){return this._loopEnd},set:function(n){this._loopEnd=n}},{key:"loopStart",get:function(){return this._loopStart},set:function(n){this._loopStart=n}}]),r(n,[{key:"reload",value:function(n,e){this._startTime=0,this._pauseTime=0,this._isPlaying=!1,this._isLoaded=!1,this._progress=0,this.sourceNode&&this.sourceNode.stop(),this._load(n,e)}},{key:"_load",value:function(n,e){var t=this;if(n)if("string"==typeof n){console.log("tu veux play un fichier en ajax"),this._isLoaded=!1,this._progress=0;var i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType="arraybuffer",i.onprogress=function(n){t._progress=n.loaded/n.total},i.onload=function(){t.ctx.decodeAudioData(i.response).then(function(n){t._buffer=n,t._isLoaded=!0,e&&e()}).catch(function(n){console.error(n)})},i.send()}else n instanceof ArrayBuffer&&this.ctx.decodeAudioData(n).then(function(n){t._buffer=n,t._isLoaded=!0,e&&e()}).catch(function(n){console.error(n)})}},{key:"play",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.req&&cancelAnimationFrame(this.req),this._onUpdate(),this._isPlaying=!0;var e=this._pauseTime-this._startTime+n;this._startTime=this.ctx.currentTime-e,this.sourceNode=this.ctx.createBufferSource(),this._isFiltered?this.sourceNode.connect(this.biquadFilterNode):this.sourceNode.connect(this.analyserNode),this._buffer&&(this.sourceNode.buffer=this._buffer),this.sourceNode.loop=this._loop,this._loopStart&&(this.sourceNode.loopStart=this._loopStart),this._loopEnd&&(this.sourceNode.loopEnd=this._loopEnd),this.sourceNode.start(0,0),this.sourceNode.addEventListener("ended",this._onEnded,!1)}},{key:"pause",value:function(){this.req&&cancelAnimationFrame(this.req),this.sourceNode&&(this.sourceNode.removeEventListener("ended",this._onEnded,!1),this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode=null),this._pauseTime=this.ctx.currentTime,this._isPlaying=!1}},{key:"stop",value:function(){this.req&&cancelAnimationFrame(this.req),this.sourceNode&&(this.sourceNode.removeEventListener("ended",this._onEnded,!1),this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode=null)}},{key:"before",value:function(n,e,t){var i=this;return this._sections.push({label:n,condition:function(){return i.time<e},callback:t}),this}},{key:"after",value:function(n,e,t){var i=this;return this._sections.push({label:n,condition:function(){return i.time>e},callback:t}),this}},{key:"between",value:function(n,e,t,i){var r=this;return this._sections.push({label:n,condition:function(){return r.time>e&&r.time<t},callback:i}),this}},{key:"onceAt",value:function(n,e,t){var i=this,r=null;return this._sections.push({label:n,condition:function(){return i.time>e&&!this.called},callback:function(){console.log("once :",r.label),t.call(this),r.called=!0},called:!1}),r=this._sections[this._sections.length-1],this}},{key:"getSpectrum",value:function(){return this.analyserNode.getByteFrequencyData(this.frequencyDataArray),this.frequencyDataArray}},{key:"getWaveform",value:function(){return this.analyserNode.getByteTimeDomainData(this.timeDomainDataArray),this.timeDomainDataArray}},{key:"getFrequency",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=0,i=this.getSpectrum();if(void 0!==e){for(var r=n;r<=e;r++)t+=i[r];return t/(e-n+1)}return i[n]}},{key:"createKick",value:function(n){var e=n.frequency,t=n.threshold,i=n.decay,r=n.onKick,s=n.offKick,a=new o({frequency:e,threshold:t,decay:i,onKick:r,offKick:s});return this._kicks.push(a),a}},{key:"createBeat",value:function(n){var e=n.factor,t=n.onBeat,i=new a({factor:e,onBeat:t});return this._beats.push(i),i}},{key:"onUpdate",value:function(){this.req=requestAnimationFrame(this._onUpdate);for(var n in this._sections)this._sections[n].condition()&&this._sections[n].callback.call(this);var e=this.getSpectrum();for(var t in this._kicks)this._kicks[t].calc(e);var i=Math.max(0,this.time-this._offsetTime);for(var r in this._beats)this._beats[r].calc(i,this._beatDuration);this.debug&&this.debug.draw()}},{key:"onEnded",value:function(){this.stop()}},{key:"filterFrequency",set:function(n){this.biquadFilterNode.frequency.value=n}},{key:"progress",get:function(){return this._progress}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"duration",get:function(){return this._isLoaded?this._buffer.duration:0}},{key:"time",get:function(){return this.isPlaying?this.ctx.currentTime-this._startTime:this._pauseTime-this._startTime}},{key:"volume",set:function(n){this.gainNode.gain.value=n},get:function(){return this.gainNode.gain.value}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"beatDuration",get:function(){return this._beatDuration}}]),n}();e.default=s;var o=function(){function n(e){var t=e.frequency,r=e.threshold,s=e.decay,o=e.onKick,a=e.offKick;i(this,n),this.frequency=void 0!==t?t:[0,10],this.threshold=void 0!==r?r:.3,this.decay=void 0!==s?s:.02,this.onKick=o,this.offKick=a,this.isOn=!1,this.isKick=!1,this.currentThreshold=this.threshold}return r(n,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(n){var e=n.frequency,t=n.threshold,i=n.decay,r=n.onKick,s=n.offKick;this.frequency=void 0!==e?e:this.frequency,this.threshold=void 0!==t?t:this.threshold,this.decay=void 0!==i?i:this.decay,this.onKick=r||this.onKick,this.offKick=s||this.offKick}},{key:"calc",value:function(n){if(this.isOn){var e=this.maxAmplitude(n,this.frequency);e>=this.currentThreshold&&e>=this.threshold?(this.currentThreshold=e,this.onKick&&this.onKick(e),this.isKick=!0):(this.offKick&&this.offKick(e),this.currentThreshold-=this.decay,this.isKick=!1)}}},{key:"maxAmplitude",value:function(n,e){var t=0;if(!e.length)return e<n.length?n[~~e]:null;for(var i=e[0],r=e[1];i<=r;i++)n[i]>t&&(t=n[i]);return t}}]),n}(),a=function(){function n(e){var t=e.factor,r=e.onBeat;i(this,n),this.factor=void 0!==t?t:1,this.onBeat=r,this.isOn=!1,this.currentTime=0}return r(n,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(n){var e=n.factor,t=n.onBeat;this.factor=void 0!==e?e:this.factor,this.onBeat=t||this.onBeat}},{key:"calc",value:function(n,e){if(0!=n){var t=e*this.factor;n>=this.currentTime+t&&(this.isOn&&this.onBeat&&this.onBeat(),this.currentTime+=t)}}}]),n}(),c=function(){function n(e){i(this,n),this.sound=e,this.canvas=document.createElement("canvas"),this.canvas.width=512,this.canvas.height=300,this.canvas.style.position="absolute",this.canvas.style.bottom=0,this.canvas.style.left=0,this.canvas.style.zIndex=3,document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),window.addEventListener("resize",this.resize.bind(this),!1),this.resize()}return r(n,[{key:"resize",value:function(){this.canvas.width=window.innerWidth}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.strokeStyle="#a1a1a1",this.ctx.stroke(),this.ctx.beginPath();for(var n=this.sound.getSpectrum(),e=null,t=n.length,i=this.canvas.width/t,r=this.canvas.height-10,s=0;s<t;s++)e=n[s]/256,this.ctx.rect(s*i,r-r*e,i/2,r*e);this.ctx.fillStyle="#ffffff",this.ctx.fill(),this.ctx.beginPath(),this.ctx.font="10px Arial",this.ctx.textBaseline="middle",this.ctx.textAlign="left";for(var o=0,a=t;o<a;o++)o%10==0&&(this.ctx.rect(o*i,r,i/2,10),this.ctx.fillText(o,o*i+4,r+5));this.ctx.fillStyle="#ffffff",this.ctx.fill();for(var c=this.sound._kicks,d=null,l=c.length,h=null,u=null,f=0,m=l;f<m;f++)d=c[f],d.isOn&&(h=d.frequency.length?d.frequency[0]:d.frequency,u=d.frequency.length?d.frequency[1]-d.frequency[0]+1:1,this.ctx.beginPath(),this.ctx.rect(h*i,r-r*(d.threshold/256),u*i-.5*i,2),this.ctx.rect(h*i,r-r*(d.currentThreshold/256),u*i-.5*i,5),this.ctx.fillStyle=d.isKick?"#00ff00":"#ff0000",this.ctx.fill());this.ctx.beginPath();for(var p=this.sound.getWaveform(),y=null,v=p.length,g=this.canvas.width/v,b=this.canvas.height-10,w=0;w<v;w++)y=p[w]/256,0==w?this.ctx.moveTo(w*g,b*y):this.ctx.lineTo(w*g,b*y);this.ctx.strokeStyle="#0000ff",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.textAlign="right",this.ctx.textBaseline="top",this.ctx.font="15px Arial",this.ctx.fillStyle="#ffffff",this.ctx.fillText(Math.round(10*this.sound.time)/10+" / "+Math.round(10*this.sound.duration)/10,this.canvas.width-5,5),this.ctx.beginPath();for(var k=this.sound._sections,x=null,_=k.length,N="",E=0,S=_;E<S;E++)x=k[E],x.condition()&&(N+=x.label+" - ");N.length>0&&(N=N.substr(0,N.length-3)),this.ctx.fillText(N,this.canvas.width-5,25),this.ctx.fill()}}]),n}()},function(n,e,t){"use strict";t(3),t(5),t(4);var i=t(0),r=t(2),s=function(n){return n&&n.__esModule?n:{default:n}}(r);!function(){var n=20,e=0;!function(t){var r=window.document.querySelector("#loader"),s=window.document.querySelector("span#loadedSounds");s.innerHTML="("+e+"/"+n+")";var o=setInterval(function(){e>=n&&(t&&t(r),clearInterval(o))});for(var a in i.sounds.drums){var c=new XMLHttpRequest;c.open("GET",i.sounds.drums[a],!0),c.onprogress=function(n){},c.onload=function(){e++,s.innerHTML="("+e+"/"+n+")"},c.send()}for(var d in i.sounds.instruments)for(var l in i.sounds.instruments[d]){var h=new XMLHttpRequest;h.open("GET",i.sounds.instruments[d][l],!0),h.onprogress=function(n){},h.onload=function(){e++,s.innerHTML="("+e+"/"+n+")"},h.send()}}(function(n){n.remove(),window.app=new s.default;var e=window.document.getElementById("launch"),t=window.document.getElementById("introduction");t.addEventListener("transitionend",function(n){"introduction"===n.target.id&&"transform"===n.propertyName&&t.remove()}),e.addEventListener("click",function(n){t.classList.add("hidden"),window.app.playSounds()})})}()},function(n,e,t){e=n.exports=t(10)(void 0),e.push([n.i,"@import url(https://fonts.googleapis.com/css?family=Open+Sans:300,400,700);",""]),e.push([n.i,'/*******************************\n          Named colors\n*******************************/\n/*******************************\n          Shadows\n*******************************/\n/*! normalize.css v7.0.0 | MIT License | github.com/necolas/normalize.css */\n/* Document\r\n   ========================================================================== */\n/**\r\n * 1. Correct the line height in all browsers.\r\n * 2. Prevent adjustments of font size after orientation changes in\r\n *    IE on Windows Phone and in iOS.\r\n */\nhtml {\n  line-height: 1.15;\n  /* 1 */\n  -ms-text-size-adjust: 100%;\n  /* 2 */\n  -webkit-text-size-adjust: 100%;\n  /* 2 */ }\n\n/* Sections\r\n   ========================================================================== */\n/**\r\n * Remove the margin in all browsers (opinionated).\r\n */\nbody {\n  margin: 0; }\n\n/**\r\n * Add the correct display in IE 9-.\r\n */\narticle,\naside,\nfooter,\nheader,\nnav,\nsection {\n  display: block; }\n\n/**\r\n * Correct the font size and margin on `h1` elements within `section` and\r\n * `article` contexts in Chrome, Firefox, and Safari.\r\n */\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0; }\n\n/* Grouping content\r\n   ========================================================================== */\n/**\r\n * Add the correct display in IE 9-.\r\n * 1. Add the correct display in IE.\r\n */\nfigcaption,\nfigure,\nmain {\n  /* 1 */\n  display: block; }\n\n/**\r\n * Add the correct margin in IE 8.\r\n */\nfigure {\n  margin: 1em 40px; }\n\n/**\r\n * 1. Add the correct box sizing in Firefox.\r\n * 2. Show the overflow in Edge and IE.\r\n */\nhr {\n  box-sizing: content-box;\n  /* 1 */\n  height: 0;\n  /* 1 */\n  overflow: visible;\n  /* 2 */ }\n\n/**\r\n * 1. Correct the inheritance and scaling of font size in all browsers.\r\n * 2. Correct the odd `em` font sizing in all browsers.\r\n */\npre {\n  font-family: monospace, monospace;\n  /* 1 */\n  font-size: 1em;\n  /* 2 */ }\n\n/* Text-level semantics\r\n   ========================================================================== */\n/**\r\n * 1. Remove the gray background on active links in IE 10.\r\n * 2. Remove gaps in links underline in iOS 8+ and Safari 8+.\r\n */\na {\n  background-color: transparent;\n  /* 1 */\n  -webkit-text-decoration-skip: objects;\n  /* 2 */ }\n\n/**\r\n * 1. Remove the bottom border in Chrome 57- and Firefox 39-.\r\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\r\n */\nabbr[title] {\n  border-bottom: none;\n  /* 1 */\n  text-decoration: underline;\n  /* 2 */\n  text-decoration: underline dotted;\n  /* 2 */ }\n\n/**\r\n * Prevent the duplicate application of `bolder` by the next rule in Safari 6.\r\n */\nb,\nstrong {\n  font-weight: inherit; }\n\n/**\r\n * Add the correct font weight in Chrome, Edge, and Safari.\r\n */\nb,\nstrong {\n  font-weight: bolder; }\n\n/**\r\n * 1. Correct the inheritance and scaling of font size in all browsers.\r\n * 2. Correct the odd `em` font sizing in all browsers.\r\n */\ncode,\nkbd,\nsamp {\n  font-family: monospace, monospace;\n  /* 1 */\n  font-size: 1em;\n  /* 2 */ }\n\n/**\r\n * Add the correct font style in Android 4.3-.\r\n */\ndfn {\n  font-style: italic; }\n\n/**\r\n * Add the correct background and color in IE 9-.\r\n */\nmark {\n  background-color: #ff0;\n  color: #000; }\n\n/**\r\n * Add the correct font size in all browsers.\r\n */\nsmall {\n  font-size: 80%; }\n\n/**\r\n * Prevent `sub` and `sup` elements from affecting the line height in\r\n * all browsers.\r\n */\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline; }\n\nsub {\n  bottom: -0.25em; }\n\nsup {\n  top: -0.5em; }\n\n/* Embedded content\r\n   ========================================================================== */\n/**\r\n * Add the correct display in IE 9-.\r\n */\naudio,\nvideo {\n  display: inline-block; }\n\n/**\r\n * Add the correct display in iOS 4-7.\r\n */\naudio:not([controls]) {\n  display: none;\n  height: 0; }\n\n/**\r\n * Remove the border on images inside links in IE 10-.\r\n */\nimg {\n  border-style: none; }\n\n/**\r\n * Hide the overflow in IE.\r\n */\nsvg:not(:root) {\n  overflow: hidden; }\n\n/* Forms\r\n   ========================================================================== */\n/**\r\n * 1. Change the font styles in all browsers (opinionated).\r\n * 2. Remove the margin in Firefox and Safari.\r\n */\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: sans-serif;\n  /* 1 */\n  font-size: 100%;\n  /* 1 */\n  line-height: 1.15;\n  /* 1 */\n  margin: 0;\n  /* 2 */ }\n\n/**\r\n * Show the overflow in IE.\r\n * 1. Show the overflow in Edge.\r\n */\nbutton,\ninput {\n  /* 1 */\n  overflow: visible; }\n\n/**\r\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\r\n * 1. Remove the inheritance of text transform in Firefox.\r\n */\nbutton,\nselect {\n  /* 1 */\n  text-transform: none; }\n\n/**\r\n * 1. Prevent a WebKit bug where (2) destroys native `audio` and `video`\r\n *    controls in Android 4.\r\n * 2. Correct the inability to style clickable types in iOS and Safari.\r\n */\nbutton,\nhtml [type="button"],\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button;\n  /* 2 */ }\n\n/**\r\n * Remove the inner border and padding in Firefox.\r\n */\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0; }\n\n/**\r\n * Restore the focus styles unset by the previous rule.\r\n */\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText; }\n\n/**\r\n * Correct the padding in Firefox.\r\n */\nfieldset {\n  padding: 0.35em 0.75em 0.625em; }\n\n/**\r\n * 1. Correct the text wrapping in Edge and IE.\r\n * 2. Correct the color inheritance from `fieldset` elements in IE.\r\n * 3. Remove the padding so developers are not caught out when they zero out\r\n *    `fieldset` elements in all browsers.\r\n */\nlegend {\n  box-sizing: border-box;\n  /* 1 */\n  color: inherit;\n  /* 2 */\n  display: table;\n  /* 1 */\n  max-width: 100%;\n  /* 1 */\n  padding: 0;\n  /* 3 */\n  white-space: normal;\n  /* 1 */ }\n\n/**\r\n * 1. Add the correct display in IE 9-.\r\n * 2. Add the correct vertical alignment in Chrome, Firefox, and Opera.\r\n */\nprogress {\n  display: inline-block;\n  /* 1 */\n  vertical-align: baseline;\n  /* 2 */ }\n\n/**\r\n * Remove the default vertical scrollbar in IE.\r\n */\ntextarea {\n  overflow: auto; }\n\n/**\r\n * 1. Add the correct box sizing in IE 10-.\r\n * 2. Remove the padding in IE 10-.\r\n */\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box;\n  /* 1 */\n  padding: 0;\n  /* 2 */ }\n\n/**\r\n * Correct the cursor style of increment and decrement buttons in Chrome.\r\n */\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto; }\n\n/**\r\n * 1. Correct the odd appearance in Chrome and Safari.\r\n * 2. Correct the outline style in Safari.\r\n */\n[type="search"] {\n  -webkit-appearance: textfield;\n  /* 1 */\n  outline-offset: -2px;\n  /* 2 */ }\n\n/**\r\n * Remove the inner padding and cancel buttons in Chrome and Safari on macOS.\r\n */\n[type="search"]::-webkit-search-cancel-button,\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none; }\n\n/**\r\n * 1. Correct the inability to style clickable types in iOS and Safari.\r\n * 2. Change font properties to `inherit` in Safari.\r\n */\n::-webkit-file-upload-button {\n  -webkit-appearance: button;\n  /* 1 */\n  font: inherit;\n  /* 2 */ }\n\n/* Interactive\r\n   ========================================================================== */\n/*\r\n * Add the correct display in IE 9-.\r\n * 1. Add the correct display in Edge, IE, and Firefox.\r\n */\ndetails,\nmenu {\n  display: block; }\n\n/*\r\n * Add the correct display in all browsers.\r\n */\nsummary {\n  display: list-item; }\n\n/* Scripting\r\n   ========================================================================== */\n/**\r\n * Add the correct display in IE 9-.\r\n */\ncanvas {\n  display: inline-block; }\n\n/**\r\n * Add the correct display in IE.\r\n */\ntemplate {\n  display: none; }\n\n/* Hidden\r\n   ========================================================================== */\n/**\r\n * Add the correct display in IE 10-.\r\n */\n[hidden] {\n  display: none; }\n\n/* http://meyerweb.com/eric/tools/css/reset/\r\n   v2.0 | 20110126\r\n   License: none (public domain)\r\n*/\nhtml, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline; }\n\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {\n  display: block; }\n\nbody {\n  line-height: 1; }\n\nol, ul {\n  list-style: none; }\n\nblockquote, q {\n  quotes: none; }\n\nblockquote:before, blockquote:after {\n  content: \'\';\n  content: none; }\n\nq:before, q:after {\n  content: \'\';\n  content: none; }\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n/*******************************\n          Named colors\n*******************************/\n/*******************************\n          Shadows\n*******************************/\nhtml {\n  font-size: 100%;\n  font-family: \'Open Sans\', \'Lato\', \'Roboto\', sans-serif; }\n\n#loader {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 9999;\n  background: rgba(0, 0, 0, 0.83);\n  box-shadow: inset 0 0 1000px black;\n  backdrop-filter: blur(3px);\n  -webkit-backdrop-filter: blur(3px); }\n\nbody {\n  color: whitesmoke;\n  overflow: hidden; }\n\nh1, h2, h3 {\n  text-transform: uppercase;\n  margin: 1rem 0.5rem; }\n\nh1 {\n  font-size: 2rem; }\n\nh2 {\n  font-size: 1.5rem; }\n\n.controls {\n  transition: all 0.4s ease-in;\n  position: fixed;\n  z-index: 999;\n  top: 25px;\n  left: 25px;\n  user-select: none;\n  display: flex;\n  align-items: flex-start; }\n  .controls > * {\n    margin-right: 20px; }\n  .controls.hidden {\n    transform: translateX(-420px);\n    visibility: hidden; }\n    .controls.hidden #toggleOverlay {\n      visibility: visible; }\n  .controls.visible {\n    visibility: visible;\n    transform: translateX(0); }\n\n#toggleOverlay {\n  transition: all 0.5s ease-in;\n  position: relative; }\n\n.overlay {\n  padding: 40px;\n  background: rgba(0, 0, 0, 0.42);\n  border-radius: 4px; }\n  .overlay > h2:first-of-type {\n    margin-top: 0; }\n\n.notes {\n  transition: all 0.2s;\n  width: 100vw;\n  position: absolute;\n  opacity: 0.8;\n  z-index: -1;\n  display: flex;\n  flex-direction: column; }\n  .notes:after {\n    transition: all 0.2s;\n    content: \'\';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n    background: white; }\n  .notes.kicking {\n    filter: invert(75%); }\n    .notes.kicking:after {\n      opacity: 0.3; }\n  .notes > .note {\n    transition: all 0.3s;\n    height: 16.666667vh; }\n    .notes > .note:hover {\n      opacity: 1;\n      cursor: pointer; }\n\np {\n  margin: 2rem;\n  line-height: 1.4rem; }\n\nh2 + p {\n  margin-top: 0.5rem; }\n\np + h2 {\n  margin-top: 0; }\n\np.introduction {\n  text-align: center;\n  max-width: 50%; }\n\nstrong {\n  font-weight: 700; }\n\ncanvas {\n  z-index: 1; }\n\nbutton {\n  transition: all 0.3s;\n  outline: none;\n  border: none;\n  background: rgba(0, 0, 0, 0.38);\n  padding: 25px;\n  color: whitesmoke;\n  border-radius: 4px; }\n  button:not([disabled]):hover {\n    cursor: pointer;\n    transform: scale(1.025);\n    box-shadow: 0 2px 30px rgba(0, 0, 0, 0.24);\n    color: black;\n    background: rgba(245, 245, 245, 0.78); }\n  button.active {\n    color: black;\n    background: rgba(245, 245, 245, 0.78); }\n  button[disabled] {\n    opacity: 0.3;\n    cursor: not-allowed; }\n\n.theme-blue .sixth {\n  background: #238bff; }\n\n.theme-blue .fifth {\n  background: #3c99ff; }\n\n.theme-blue .fourth {\n  background: #56a6ff; }\n\n.theme-blue .third {\n  background: #6fb3ff; }\n\n.theme-blue .second {\n  background: #89c1ff; }\n\n.theme-blue .first {\n  background: #a2ceff; }\n\n.theme-green .sixth {\n  background: #77ff97; }\n\n.theme-green .fifth {\n  background: #90ffaa; }\n\n.theme-green .fourth {\n  background: #aaffbe; }\n\n.theme-green .third {\n  background: #c3ffd1; }\n\n.theme-green .second {\n  background: #ddffe5; }\n\n.theme-green .first {\n  background: #f6fff8; }\n\n.theme-violet .sixth {\n  background: #fa6aff; }\n\n.theme-violet .fifth {\n  background: #fb83ff; }\n\n.theme-violet .fourth {\n  background: #fc9dff; }\n\n.theme-violet .third {\n  background: #fcb6ff; }\n\n.theme-violet .second {\n  background: #fdd0ff; }\n\n.theme-violet .first {\n  background: #fee9ff; }\n\n.theme-yellow .sixth {\n  background: #fff46c; }\n\n.theme-yellow .fifth {\n  background: #fff685; }\n\n.theme-yellow .fourth {\n  background: #fff89f; }\n\n.theme-yellow .third {\n  background: #fffab8; }\n\n.theme-yellow .second {\n  background: #fffcd2; }\n\n.theme-yellow .first {\n  background: #fffdeb; }\n\n.theme-red .sixth {\n  background: #ff5347; }\n\n.theme-red .fifth {\n  background: #ff6b60; }\n\n.theme-red .fourth {\n  background: #ff827a; }\n\n.theme-red .third {\n  background: #ff9a93; }\n\n.theme-red .second {\n  background: #ffb2ad; }\n\n.theme-red .first {\n  background: #ffcac6; }\n\n#introduction {\n  transition: transform 0.4s ease-in, opacity 0.4s, filter 0.3s;\n  position: fixed;\n  z-index: 1000;\n  background: #f05050;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  display: flex; }\n  #introduction.hidden {\n    transform: scale(0);\n    opacity: 0;\n    filter: blur(5px); }\n\n#main {\n  transition: transform 1.2s, opacity 0.7s;\n  opacity: 0;\n  visibility: hidden;\n  transform: scale(0.8); }\n\n#main.visible {\n  opacity: 1;\n  visibility: visible;\n  transform: scale(1); }\n',""])},,function(n,e,t){n.exports=t.p+"assets/sounds/arp/odrenka/Asharp.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/odrenka/C4.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/odrenka/C5.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/odrenka/Dsharp.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/odrenka/F.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/odrenka/G.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/trancy/Asharp.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/trancy/C4.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/trancy/C5.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/trancy/Dsharp.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/trancy/F.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/trancy/G.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/violins/Asharp.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/violins/C4.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/violins/C5.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/violins/Dsharp.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/violins/F.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/arp/violins/G.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/drums.wav"},function(n,e,t){n.exports=t.p+"assets/sounds/drums2.wav"}],[8]);