webpackJsonp([0],[,function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return Math.floor(Math.random()*t+e)}function o(){var e=a(0,T.length);return T[e]}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(4),h=n(c),u=i(7),d=(n(u),i(11)),l=(n(d),i(10)),f=(n(l),i(9)),m=(n(f),i(8)),y=(n(m),i(6)),v=(n(y),i(5)),p=n(v),g=i(12),w=n(g),x=i(14),k=(n(x),i(15)),b=n(k),_=window.innerWidth,E=window.innerHeight,M=[],A=[],q=new e.Group,T=[2844553,12506836,15127167],B=function(){function t(){var i=this;s(this,t),this.addListeners(),this.meteors_nb=document.getElementById("range_meteors").value,this.cage_edge=document.getElementById("range_edge").value,this.renderer=new e.WebGLRenderer({antialias:!1,alpha:!0}),this.renderer.setSize(_,E),this.renderer.setClearColor(0,0),document.getElementById("main").appendChild(this.renderer.domElement),this.scene=new e.Scene,this.camera=new e.PerspectiveCamera(50,_/E,.1,2),this.camera.position.y=.2,this.camera.position.z=1,this.scene.add(this.camera),this.createKernel(),this.createCage();var n=new e.DirectionalLight(12506836);n.position.set(-1,1,2),this.scene.add(n),this.createMeteor(),this.audio=new h.default(w.default,102,.3,function(){i.audio.play()},!1),this.audio.onceAt("orbit explosion 1",8.3,function(){i.updateScale(q,{x:1,y:1,z:1},{x:2,y:2,z:2},2e3,500,b.default.Easing.Linear.None)}).between("after explosion 1",8.5,9,function(){i.updateScale(q,{x:2,y:2,z:2},{x:1,y:1,z:1},0,500,b.default.Easing.Linear.None)}).after("Cage scale",8.3,function(){i.cage.scale.x=1+i.audio.frequencyDataArray[150]/255/2,i.cage.scale.y=1+i.audio.frequencyDataArray[150]/255/2,i.cage.scale.z=1+i.audio.frequencyDataArray[150]/255/2}).after("Meteors jump",17.2,function(){for(var e=0;e<i.topMeteors.length;e++)i.topMeteors[e].position.y=A[e]+i.audio.frequencyDataArray[170]/255/(10+Math.random());for(var t=0;t<i.bottomMeteors.length;t++)i.bottomMeteors[t].position.y=A[t]-i.audio.frequencyDataArray[170]/255/(20+Math.random())}).onceAt("orbit explosion 2",33.9,function(){i.updateScale(q,{x:1,y:1,z:1},{x:2,y:2,z:2},2e3,500,b.default.Easing.Linear.None)}).after("after explosion 2",34.2,function(){i.updateScale(q,{x:2,y:2,z:2},{x:1,y:1,z:1},0,500,b.default.Easing.Linear.None)});var a=void 0;a=new e.OrbitControls(this.camera,this.renderer.domElement),a.enableZoom=!1,window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.renderer.animate(this.render.bind(this)),window.scene=this.scene,window.THREE=e}return r(t,[{key:"decomposeMusic",value:function(){this.topMeteors=M.slice(0,this.meteors_nb/3-1),this.middleMeteors=M.slice(this.meteors_nb/3,this.meteors_nb/3*2-1),this.bottomMeteors=M.slice(this.meteors_nb/3*2,this.meteors_nb/3*3-1)}},{key:"updateScale",value:function(e,t,i,n,s,a){var o=void 0!==s?s:0,r=void 0!==a?a:b.default.Easing.Linear.None;new b.default.Tween(t).to(i,n).delay(o).easing(r).onUpdate(function(){e.scale.copy(i)}).start(),console.log(e.scale.copy(i))}},{key:"addListeners",value:function(){var t=this;document.getElementById("range_edge").addEventListener("change",function(){t.cage_edge=document.getElementById("range_edge").value,t.scene.remove(t.cage),t.createCage()}),document.getElementById("range_meteors").addEventListener("change",function(){t.meteors_nb=document.getElementById("range_meteors").value;for(var e=0;e<M.length;e++)q.remove(M[e]);A=[],M=[],t.createMeteor()}),document.getElementById("camera1").addEventListener("click",function(){t.scene.remove(t.camera),t.camera=new e.PerspectiveCamera(50,_/E,.1,2),t.camera.position.y=.2,t.camera.position.z=1,t.camera.rotation.x=-.2,t.scene.add(t.camera)}),document.getElementById("camera2").addEventListener("click",function(){t.scene.remove(t.camera),t.camera=new e.PerspectiveCamera(50,_/E,.1,2),t.camera.position.y=0,t.camera.position.z=1,t.camera.rotation.x=0,t.scene.add(t.camera)}),document.getElementById("camera3").addEventListener("click",function(){t.scene.remove(t.camera),t.camera=new e.PerspectiveCamera(50,_/E,.1,2),t.camera.position.y=1,t.camera.position.z=0,t.camera.rotation.x=-Math.PI/2,t.scene.add(t.camera)}),document.getElementById("range_volume").addEventListener("change",function(){t.audio.volume=document.getElementById("range_volume").value}),document.getElementById("pause").addEventListener("click",function(){t.audio.pause()}),document.getElementById("play").addEventListener("click",function(){t.audio.play()}),$("#pause").on("click",function(){$("#pause").css("display","none"),$("#play").css("display","block")}),$("#play").on("click",function(){$("#pause").css("display","block"),$("#play").css("display","none")}),$(".swipe").mouseup(function(){$(this).blur();var e=$(this).val();$(this).parent().append('<div class="swipes-ripple-range"></div>'),$(this).siblings(".swipes-ripple-range").css("left","calc("+e+"% - 30px)").delay(310).queue(function(){$(this).remove().dequeue()})})}},{key:"createKernel",value:function(){var t=new e.SphereGeometry(.08,50,50),i=new e.TextureLoader,n=i.load(p.default),s=new e.MeshLambertMaterial({color:16777215,emissive:987674,map:n});this.kernel=new e.Mesh(t,s),this.scene.add(this.kernel)}},{key:"createCage",value:function(){var t=new e.IcosahedronGeometry(.2,this.cage_edge),i=new e.MeshBasicMaterial({color:12506836,wireframe:!0});this.cage=new e.Mesh(t,i),this.scene.add(this.cage)}},{key:"createMeteor",value:function(){for(var t=0;t<this.meteors_nb;t++){for(var i=new e.TetrahedronGeometry(.004,1),n=0;n<i.faces.length;n++)i.faces[n].color.setHex(o());var s=new e.MeshBasicMaterial({color:16777215,vertexColors:e.FaceColors});this.meteors=new e.Mesh(i,s);var a=Math.random()*Math.PI*2;this.meteors.position.set(Math.cos(a)*(.3+.4*Math.random()),.05*Math.random()-.025,Math.sin(a)*(.3+.4*Math.random())),q.add(this.meteors),this.scene.add(q),M.push(this.meteors),A.push(this.meteors.position.y)}this.decomposeMusic()}},{key:"render",value:function(){this.kernel.scale.x=1+this.audio.frequencyDataArray[40]/255*1,this.kernel.scale.y=1+this.audio.frequencyDataArray[40]/255*1,this.kernel.scale.z=1+this.audio.frequencyDataArray[40]/255*1,this.cage.rotation.x+=.005,this.cage.rotation.y+=.002,q.rotation.y+=.002;for(var e=0;e<M.length;e++)M[e].rotation.x+=Math.random()/10,M[e].rotation.y+=Math.random()/10;this.renderer.render(this.scene,this.camera)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}]),t}();t.default=B}).call(t,i(0))},function(e,t){},function(e,t,i){"use strict";i(2);var n=i(1),s=function(e){return e&&e.__esModule?e:{default:e}}(n);$("#start").on("click",function(){$(".landing-gate").css("display","none"),$(".panel-controls").css("display","flex"),window.app=new s.default}),window.onload=function(){$(".loader").css("display","none")}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=function(){function e(t,i,s,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n(this,e),this.ctx;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.ctx=new AudioContext}catch(e){throw new Error("Web Audio API is not supported in this browser")}this._bpm=i,this._beatDuration=60/this._bpm,this._offsetTime=s,this._sections=[],this._kicks=[],this._beats=[],this._startTime=0,this._pauseTime=0,this._isPlaying=!1,this._isLoaded=!1,this._progress=0,this._onUpdate=this.onUpdate.bind(this),this._onEnded=this.onEnded.bind(this),this.gainNode=this.ctx.createGain(),this.gainNode.connect(this.ctx.destination),this.analyserNode=this.ctx.createAnalyser(),this.analyserNode.connect(this.gainNode),this.analyserNode.smoothingTimeConstant=.8,this.analyserNode.fftSize=512;var r=this.analyserNode.frequencyBinCount;this.frequencyDataArray=new Uint8Array(r),this.timeDomainDataArray=new Uint8Array(r),o&&(this.debug=new c(this)),this._load(t,a),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame}return s(e,[{key:"_load",value:function(e,t){var i=this;if(e){this._isLoaded=!1,this._progress=0;var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onprogress=function(e){i._progress=e.loaded/e.total},n.onload=function(){i.ctx.decodeAudioData(n.response,function(e){i._buffer=e,i._isLoaded=!0,t&&t()},function(e){console.log(e)})},n.send()}}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.req&&cancelAnimationFrame(this.req),this._onUpdate(),this._isPlaying=!0;var t=this._pauseTime-this._startTime+e;this._startTime=this.ctx.currentTime-t,this.sourceNode=this.ctx.createBufferSource(),this.sourceNode.connect(this.analyserNode),this.sourceNode.buffer=this._buffer,this.sourceNode.start(0,t),this.sourceNode.addEventListener("ended",this._onEnded,!1)}},{key:"pause",value:function(){this.req&&cancelAnimationFrame(this.req),this.sourceNode&&(this.sourceNode.removeEventListener("ended",this._onEnded,!1),this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode=null),this._pauseTime=this.ctx.currentTime,this._isPlaying=!1}},{key:"before",value:function(e,t,i){var n=this;return this._sections.push({label:e,condition:function(){return n.time<t},callback:i}),this}},{key:"after",value:function(e,t,i){var n=this;return this._sections.push({label:e,condition:function(){return n.time>t},callback:i}),this}},{key:"between",value:function(e,t,i,n){var s=this;return this._sections.push({label:e,condition:function(){return s.time>t&&s.time<i},callback:n}),this}},{key:"onceAt",value:function(e,t,i){var n=this,s=null;return this._sections.push({label:e,condition:function(){return n.time>t&&!this.called},callback:function(){console.log("once :",s.label),i.call(this),s.called=!0},called:!1}),s=this._sections[this._sections.length-1],this}},{key:"getSpectrum",value:function(){return this.analyserNode.getByteFrequencyData(this.frequencyDataArray),this.frequencyDataArray}},{key:"getWaveform",value:function(){return this.analyserNode.getByteTimeDomainData(this.timeDomainDataArray),this.timeDomainDataArray}},{key:"getFrequency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,n=this.getSpectrum();if(void 0!==t){for(var s=e;s<=t;s++)i+=n[s];return i/(t-e+1)}return n[e]}},{key:"createKick",value:function(e){var t=e.frequency,i=e.threshold,n=e.decay,s=e.onKick,a=e.offKick,r=new o({frequency:t,threshold:i,decay:n,onKick:s,offKick:a});return this._kicks.push(r),r}},{key:"createBeat",value:function(e){var t=e.factor,i=e.onBeat,n=new r({factor:t,onBeat:i});return this._beats.push(n),n}},{key:"onUpdate",value:function(){this.req=requestAnimationFrame(this._onUpdate);for(var e in this._sections)this._sections[e].condition()&&this._sections[e].callback.call(this);var t=this.getSpectrum();for(var i in this._kicks)this._kicks[i].calc(t);var n=Math.max(0,this.time-this._offsetTime);for(var s in this._beats)this._beats[s].calc(n,this._beatDuration);this.debug&&this.debug.draw()}},{key:"onEnded",value:function(){this.stop()}},{key:"progress",get:function(){return this._progress}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"duration",get:function(){return this._isLoaded?this._buffer.duration:0}},{key:"time",get:function(){return this.isPlaying?this.ctx.currentTime-this._startTime:this._pauseTime-this._startTime}},{key:"volume",set:function(e){this.gainNode.gain.value=e},get:function(){return this.gainNode.gain.value}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"beatDuration",get:function(){return this._beatDuration}}]),e}();t.default=a;var o=function(){function e(t){var i=t.frequency,s=t.threshold,a=t.decay,o=t.onKick,r=t.offKick;n(this,e),this.frequency=void 0!==i?i:[0,10],this.threshold=void 0!==s?s:.3,this.decay=void 0!==a?a:.02,this.onKick=o,this.offKick=r,this.isOn=!1,this.isKick=!1,this.currentThreshold=this.threshold}return s(e,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(e){var t=e.frequency,i=e.threshold,n=e.decay,s=e.onKick,a=e.offKick;this.frequency=void 0!==t?t:this.frequency,this.threshold=void 0!==i?i:this.threshold,this.decay=void 0!==n?n:this.decay,this.onKick=s||this.onKick,this.offKick=a||this.offKick}},{key:"calc",value:function(e){if(this.isOn){var t=this.maxAmplitude(e,this.frequency);t>=this.currentThreshold&&t>=this.threshold?(this.currentThreshold=t,this.onKick&&this.onKick(t),this.isKick=!0):(this.offKick&&this.offKick(t),this.currentThreshold-=this.decay,this.isKick=!1)}}},{key:"maxAmplitude",value:function(e,t){var i=0;if(!t.length)return t<e.length?e[~~t]:null;for(var n=t[0],s=t[1];n<=s;n++)e[n]>i&&(i=e[n]);return i}}]),e}(),r=function(){function e(t){var i=t.factor,s=t.onBeat;n(this,e),this.factor=void 0!==i?i:1,this.onBeat=s,this.isOn=!1,this.currentTime=0}return s(e,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(e){var t=e.factor,i=e.onBeat;this.factor=void 0!==t?t:this.factor,this.onBeat=i||this.onBeat}},{key:"calc",value:function(e,t){if(0!=e){var i=t*this.factor;e>=this.currentTime+i&&(this.isOn&&this.onBeat&&this.onBeat(),this.currentTime+=i)}}}]),e}(),c=function(){function e(t){n(this,e),this.sound=t,this.canvas=document.createElement("canvas"),this.canvas.width=512,this.canvas.height=300,this.canvas.style.position="absolute",this.canvas.style.bottom=0,this.canvas.style.left=0,this.canvas.style.zIndex=3,document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),window.addEventListener("resize",this.resize.bind(this),!1),this.resize()}return s(e,[{key:"resize",value:function(){this.canvas.width=window.innerWidth}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.strokeStyle="#a1a1a1",this.ctx.stroke(),this.ctx.beginPath();for(var e=this.sound.getSpectrum(),t=null,i=e.length,n=this.canvas.width/i,s=this.canvas.height-10,a=0;a<i;a++)t=e[a]/256,this.ctx.rect(a*n,s-s*t,n/2,s*t);this.ctx.fillStyle="#ffffff",this.ctx.fill(),this.ctx.beginPath(),this.ctx.font="10px Arial",this.ctx.textBaseline="middle",this.ctx.textAlign="left";for(var o=0,r=i;o<r;o++)o%10==0&&(this.ctx.rect(o*n,s,n/2,10),this.ctx.fillText(o,o*n+4,s+5));this.ctx.fillStyle="#ffffff",this.ctx.fill();for(var c=this.sound._kicks,h=null,u=c.length,d=null,l=null,f=0,m=u;f<m;f++)h=c[f],h.isOn&&(d=h.frequency.length?h.frequency[0]:h.frequency,l=h.frequency.length?h.frequency[1]-h.frequency[0]+1:1,this.ctx.beginPath(),this.ctx.rect(d*n,s-s*(h.threshold/256),l*n-.5*n,2),this.ctx.rect(d*n,s-s*(h.currentThreshold/256),l*n-.5*n,5),this.ctx.fillStyle=h.isKick?"#00ff00":"#ff0000",this.ctx.fill());this.ctx.beginPath();for(var y=this.sound.getWaveform(),v=null,p=y.length,g=this.canvas.width/p,w=this.canvas.height-10,x=0;x<p;x++)v=y[x]/256,0==x?this.ctx.moveTo(x*g,w*v):this.ctx.lineTo(x*g,w*v);this.ctx.strokeStyle="#0000ff",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.textAlign="right",this.ctx.textBaseline="top",this.ctx.font="15px Arial",this.ctx.fillStyle="#ffffff",this.ctx.fillText(Math.round(10*this.sound.time)/10+" / "+Math.round(10*this.sound.duration)/10,this.canvas.width-5,5),this.ctx.beginPath();for(var k=this.sound._sections,b=null,_=k.length,E="",M=0,A=_;M<A;M++)b=k[M],b.condition()&&(E+=b.label+" - ");E.length>0&&(E=E.substr(0,E.length-3)),this.ctx.fillText(E,this.canvas.width-5,25),this.ctx.fill()}}]),e}()},function(e,t,i){e.exports=i.p+"sources/img/crater.fd9cc53efda409a41e989d76d9223205.jpg"},function(e,t,i){e.exports=i.p+"sources/img/crater1.263147073dd5857cafea8a6e70a3e538.jpg"},function(e,t,i){e.exports=i.p+"sources/img/texture10.4a5c001b0a3fff0a50e2cff38d17357e.jpg"},function(e,t,i){e.exports=i.p+"sources/img/texture3.810228756676a86b621219f95a0f914d.jpg"},function(e,t,i){e.exports=i.p+"sources/img/texture4.f113f2bb68d50a0a81f45a7ae174f87e.jpg"},function(e,t,i){e.exports=i.p+"sources/img/texture6.6c5ecba8dbc1cb9fee89cd0df95e8520.jpg"},function(e,t,i){e.exports=i.p+"sources/img/texture7.7bcd0614b4f5b9936cad07a4fa4ea413.jpg"},function(e,t,i){e.exports=i.p+"sources/sounds/sweetdreams.8cd1d76808df88629a95b4d852b5a0cc.mp3"}],[3]);