webpackJsonp([0],[,function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(8),a=(n(o),i(12)),h=n(a),c=i(11),u=n(c),l=i(10),f=n(l),d=i(9),m=n(d),v=i(6),y=(n(v),i(5)),w=n(y),p=i(4),g=n(p),k=i(7),_=n(k),x=function(){function e(){var i=this;r(this,e),this.time=0,this.container=document.querySelector("#main"),document.body.appendChild(this.container),this.camera=new t.PerspectiveCamera(70,window.innerWidth/window.innerHeight,.001,2e4),this.camera.position.z=600,this.scene=new t.Scene;var n=new t.Fog(16777215,.2,2);this.target=new t.Vector3,this.mouseX=0,this.mouseY=0,this.scene.fog=n;var s={u_time:{type:"f",value:1},u_maxSize:{type:"f",value:2e5},u_amps:{type:"f",value:0}};this.sound=new w.default(_.default,110,.3,null,!1),this.tempoKick=0,this.kick=this.sound.createKick({frequency:[15,30],decay:5,threshold:255,onKick:function(){i.tempoKick>25&&(i.tempoKick=0)},offKick:function(){}}),this.kick.on(),this.material=new t.ShaderMaterial({uniforms:s,vertexShader:h.default,fragmentShader:u.default,transparent:!0});var o=new t.BufferGeometry;this.verticeArray=new Array(2e5).fill(0);for(var a=0;a<2e5;a++){var c=new t.Vector3;this.alpha=a*(2*Math.PI),this.theta=a*Math.PI,c.x=a/16e3-6.25,c.y=10*Math.sin(a/3),c.z=Math.cos(a/3),this.verticeArray[3*a+0]=c.x,this.verticeArray[3*a+1]=c.y,this.verticeArray[3*a+2]=c.z}this.vertices=new Float32Array(this.verticeArray),this.ranks=new Float32Array(new Array(this.vertices.length/3).fill(0).map(function(t,e){return e})),o.addAttribute("position",new t.BufferAttribute(this.vertices,3)),o.addAttribute("rank",new t.BufferAttribute(this.ranks,1));var l=new t.Line(o,this.material);this.scene.add(l),this.line2=new g.default(f.default,m.default,this.scene),this.renderer=new t.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.container.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),document.addEventListener("mousemove",this.onDocumentMouseMove.bind(this)),this.renderer.animate(this.render.bind(this))}return s(e,[{key:"arrAverage",value:function(t){return t.reduce(function(t,e){return t+e})/t.length}},{key:"onDocumentMouseMove",value:function(t){this.mouseX=t.clientX-window.innerWidth/2,this.mouseY=t.clientY-window.innerHeight/2}},{key:"render",value:function(){this.time+=.01,this.material.uniforms.u_time.value=this.time,1==this.sound.progress&&(document.querySelector("#loader").style.opacity="0"),this.material.uniforms.u_amps.value=this.sound.spectrum,this.line2.lineMat.uniforms.u_amps.value=this.sound.spectrum,this.line2.lineMat.uniforms.u_time.value=this.time,this.tempoKick+=1,this.camera.position.x+=.02*(this.mouseX-this.camera.position.x),this.camera.position.y+=.02*(-this.mouseY-this.camera.position.y),this.camera.lookAt(this.scene.position),this.renderer.render(this.scene,this.camera)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}]),e}();e.default=x}).call(e,i(0))},function(t,e){},function(t,e,i){"use strict";i(2);var n=i(1),r=function(t){return t&&t.__esModule?t:{default:t}}(n);window.app=new r.default},function(t,e,i){"use strict";(function(t){function i(e,i,n){this.lineGeo=new t.InstancedBufferGeometry,this.lineMat=new t.ShaderMaterial({uniforms:{u_time:{type:"f",value:0},u_maxSize:{type:"f",value:40},u_amps:{type:"f",value:0}},vertexShader:e,fragmentShader:i}),this.lineCoords=new Array(100).fill(0);for(var r=0;r<100;r++){var s=new t.Vector3;s.x=r/4-120,s.y=0,s.z=0,this.lineCoords[3*r+0]=s.x,this.lineCoords[3*r+1]=s.y,this.lineCoords[3*r+2]=s.z}this.lineVertices=new Float32Array(this.lineCoords),this.lineRank=new Float32Array(new Array(this.lineVertices.length/3).fill(0).map(function(t,e){return e})),this.lineGeo.addAttribute("position",new t.BufferAttribute(this.lineVertices,3)),this.lineGeo.addAttribute("rank",new t.BufferAttribute(this.lineRank,1));for(var o=new Float32Array(270),a=new Float32Array(270),h=new Float32Array(90),c=new Float32Array(90),u=0,l=0,f=0,d=0,m=200*Math.random(),v=1+.6*Math.random(),y=2*Math.random(),w=20*Math.random(),r=0;r<90;r++)r%10==0&&(console.log("ok"),m=200*Math.random(),v=.7+.9*Math.random(),y=Math.random()*r/20,w=20*Math.random()),o[u++]=m+r/6,o[u++]=0,o[u++]=0,a[l++]=v,a[l++]=v,a[l++]=v,h[f++]=y,c[d++]=w;this.lineGeo.addAttribute("translation",new t.InstancedBufferAttribute(o,3,1)),this.lineGeo.addAttribute("scale",new t.InstancedBufferAttribute(a,3,1)),this.lineGeo.addAttribute("timeOffset",new t.InstancedBufferAttribute(h,1,1)),this.lineGeo.addAttribute("diviserOffset",new t.InstancedBufferAttribute(c,1,1)),console.log(c);var p=new t.Line(this.lineGeo,this.lineMat);n.add(p)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(0))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e,i,r,s){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n(this,t),this.ctx;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.ctx=new AudioContext,console.log(this.ctx)}catch(t){throw new Error("Web Audio API is not supported in this browser")}this._bpm=i,this._beatDuration=60/this._bpm,this._offsetTime=r,this._sections=[],this._kicks=[],this._beats=[],this._startTime=0,this._pauseTime=0,this._isPlaying=!1,this._isLoaded=!1,this._progress=0,this._onUpdate=this.onUpdate.bind(this),this._onEnded=this.onEnded.bind(this),this.gainNode=this.ctx.createGain(),this.gainNode.connect(this.ctx.destination),this.analyserNode=this.ctx.createAnalyser(),this.analyserNode.connect(this.gainNode),this.analyserNode.smoothingTimeConstant=.8,this.analyserNode.fftSize=512;var a=this.analyserNode.frequencyBinCount;this.frequencyDataArray=new Uint8Array(a),this.timeDomainDataArray=new Uint8Array(a),o&&(this.debug=new h(this)),this._load(e,s),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame}return r(t,[{key:"_load",value:function(t,e){var i=this;if(t){this._isLoaded=!1,this._progress=0;var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onprogress=function(t){i._progress=t.loaded/t.total},n.onload=function(){i.ctx.decodeAudioData(n.response,function(t){i._buffer=t,i._isLoaded=!0,i.play(),e&&e()},function(t){console.log(t)})},n.send()}}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.req&&cancelAnimationFrame(this.req),this._onUpdate(),this._isPlaying=!0;var e=this._pauseTime-this._startTime+t;this._startTime=this.ctx.currentTime-e,this.sourceNode=this.ctx.createBufferSource(),this.sourceNode.connect(this.analyserNode),this.sourceNode.buffer=this._buffer,this.sourceNode.start(0,e),this.sourceNode.addEventListener("ended",this._onEnded,!1)}},{key:"pause",value:function(){this.req&&cancelAnimationFrame(this.req),this.sourceNode&&(this.sourceNode.removeEventListener("ended",this._onEnded,!1),this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode=null),this._pauseTime=this.ctx.currentTime,this._isPlaying=!1}},{key:"before",value:function(t,e,i){var n=this;return this._sections.push({label:t,condition:function(){return n.time<e},callback:i}),this}},{key:"after",value:function(t,e,i){var n=this;return this._sections.push({label:t,condition:function(){return n.time>e},callback:i}),this}},{key:"between",value:function(t,e,i,n){var r=this;return this._sections.push({label:t,condition:function(){return r.time>e&&r.time<i},callback:n}),this}},{key:"onceAt",value:function(t,e,i){var n=this,r=null;return this._sections.push({label:t,condition:function(){return n.time>e&&!this.called},callback:function(){console.log("once :",r.label),i.call(this),r.called=!0},called:!1}),r=this._sections[this._sections.length-1],this}},{key:"getSpectrum",value:function(){return this.analyserNode.getByteFrequencyData(this.frequencyDataArray),this.frequencyDataArray}},{key:"getWaveform",value:function(){return this.analyserNode.getByteTimeDomainData(this.timeDomainDataArray),this.timeDomainDataArray}},{key:"getFrequency",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,n=this.getSpectrum();if(void 0!==e){for(var r=t;r<=e;r++)i+=n[r];return i/(e-t+1)}return n[t]}},{key:"createKick",value:function(t){var e=t.frequency,i=t.threshold,n=t.decay,r=t.onKick,s=t.offKick,a=new o({frequency:e,threshold:i,decay:n,onKick:r,offKick:s});return this._kicks.push(a),a}},{key:"createBeat",value:function(t){var e=t.factor,i=t.onBeat,n=new a({factor:e,onBeat:i});return this._beats.push(n),n}},{key:"onUpdate",value:function(){this.req=requestAnimationFrame(this._onUpdate);for(var t in this._sections)this._sections[t].condition()&&this._sections[t].callback.call(this);var e=this.getSpectrum();for(var i in this._kicks)this._kicks[i].calc(e);var n=Math.max(0,this.time-this._offsetTime);for(var r in this._beats)this._beats[r].calc(n,this._beatDuration);this.debug&&this.debug.draw()}},{key:"onEnded",value:function(){this.stop()}},{key:"progress",get:function(){return this._progress}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"duration",get:function(){return this._isLoaded?this._buffer.duration:0}},{key:"time",get:function(){return this.isPlaying?this.ctx.currentTime-this._startTime:this._pauseTime-this._startTime}},{key:"volume",set:function(t){this.gainNode.gain.value=t},get:function(){return this.gainNode.gain.value}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"spectrum",get:function(){return this.getFrequency(0,255)}},{key:"beatDuration",get:function(){return this._beatDuration}}]),t}();e.default=s;var o=function(){function t(e){var i=e.frequency,r=e.threshold,s=e.decay,o=e.onKick,a=e.offKick;n(this,t),this.frequency=void 0!==i?i:[0,10],this.threshold=void 0!==r?r:.3,this.decay=void 0!==s?s:.02,this.onKick=o,this.offKick=a,this.isOn=!1,this.isKick=!1,this.currentThreshold=this.threshold}return r(t,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(t){var e=t.frequency,i=t.threshold,n=t.decay,r=t.onKick,s=t.offKick;this.frequency=void 0!==e?e:this.frequency,this.threshold=void 0!==i?i:this.threshold,this.decay=void 0!==n?n:this.decay,this.onKick=r||this.onKick,this.offKick=s||this.offKick}},{key:"calc",value:function(t){if(this.isOn){var e=this.maxAmplitude(t,this.frequency);e>=this.currentThreshold&&e>=this.threshold?(this.currentThreshold=e,this.onKick&&this.onKick(e),this.isKick=!0):(this.offKick&&this.offKick(e),this.currentThreshold-=this.decay,this.isKick=!1)}}},{key:"maxAmplitude",value:function(t,e){var i=0;if(!e.length)return e<t.length?t[~~e]:null;for(var n=e[0],r=e[1];n<=r;n++)t[n]>i&&(i=t[n]);return i}}]),t}(),a=function(){function t(e){var i=e.factor,r=e.onBeat;n(this,t),this.factor=void 0!==i?i:1,this.onBeat=r,this.isOn=!1,this.currentTime=0}return r(t,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(t){var e=t.factor,i=t.onBeat;this.factor=void 0!==e?e:this.factor,this.onBeat=i||this.onBeat}},{key:"calc",value:function(t,e){if(0!=t){var i=e*this.factor;t>=this.currentTime+i&&(this.isOn&&this.onBeat&&this.onBeat(),this.currentTime+=i)}}}]),t}(),h=function(){function t(e){n(this,t),this.sound=e,this.canvas=document.createElement("canvas"),this.canvas.width=512,this.canvas.height=300,this.canvas.style.position="absolute",this.canvas.style.bottom=0,this.canvas.style.left=0,this.canvas.style.zIndex=3,document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),window.addEventListener("resize",this.resize.bind(this),!1),this.resize()}return r(t,[{key:"resize",value:function(){this.canvas.width=window.innerWidth}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.strokeStyle="#a1a1a1",this.ctx.stroke(),this.ctx.beginPath();for(var t=this.sound.getSpectrum(),e=null,i=t.length,n=this.canvas.width/i,r=this.canvas.height-10,s=0;s<i;s++)e=t[s]/256,this.ctx.rect(s*n,r-r*e,n/2,r*e);this.ctx.fillStyle="#ffffff",this.ctx.fill(),this.ctx.beginPath(),this.ctx.font="10px Arial",this.ctx.textBaseline="middle",this.ctx.textAlign="left";for(var o=0,a=i;o<a;o++)o%10==0&&(this.ctx.rect(o*n,r,n/2,10),this.ctx.fillText(o,o*n+4,r+5));this.ctx.fillStyle="#ffffff",this.ctx.fill();for(var h=this.sound._kicks,c=null,u=h.length,l=null,f=null,d=0,m=u;d<m;d++)c=h[d],c.isOn&&(l=c.frequency.length?c.frequency[0]:c.frequency,f=c.frequency.length?c.frequency[1]-c.frequency[0]+1:1,this.ctx.beginPath(),this.ctx.rect(l*n,r-r*(c.threshold/256),f*n-.5*n,2),this.ctx.rect(l*n,r-r*(c.currentThreshold/256),f*n-.5*n,5),this.ctx.fillStyle=c.isKick?"#00ff00":"#ff0000",this.ctx.fill());this.ctx.beginPath();for(var v=this.sound.getWaveform(),y=null,w=v.length,p=this.canvas.width/w,g=this.canvas.height-10,k=0;k<w;k++)y=v[k]/256,0==k?this.ctx.moveTo(k*p,g*y):this.ctx.lineTo(k*p,g*y);this.ctx.strokeStyle="#0000ff",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.textAlign="right",this.ctx.textBaseline="top",this.ctx.font="15px Arial",this.ctx.fillStyle="#ffffff",this.ctx.fillText(Math.round(10*this.sound.time)/10+" / "+Math.round(10*this.sound.duration)/10,this.canvas.width-5,5),this.ctx.beginPath();for(var _=this.sound._sections,x=null,b=_.length,A="",P=0,M=b;P<M;P++)x=_[P],x.condition()&&(A+=x.label+" - ");A.length>0&&(A=A.substr(0,A.length-3)),this.ctx.fillText(A,this.canvas.width-5,25),this.ctx.fill()}}]),t}()},function(t,e,i){"use strict";(function(t){function i(e,i){for(var n=new t.BufferGeometry,r=new Array(e).fill(0),s=0;s<e;s++){var o=new t.Vector3;new t.Vector3;s/(e/2)*(2*Math.PI),s/(e/2)*Math.PI,o.x=s/20,o.y=0,o.z=0,r[3*s+0]=o.x,r[3*s+1]=o.y,r[3*s+2]=o.z}for(var a=[],s=0;s<i;s++)a=a.concat(r);var h=new Float32Array(a);console.log(h);var c=new Array(i).fill(0).map(function(t,e){return(e+1)/2}),u=new Float32Array(new Array(h.length/3).fill(0).map(function(t,e){return c[Math.floor(e/1e3)]})),l=new Float32Array(new Array(h.length/3).fill(0).map(function(t,e){return e}));return n.addAttribute("position",new t.BufferAttribute(h,3)),n.addAttribute("rank",new t.BufferAttribute(l,1)),n.addAttribute("amps",new t.BufferAttribute(u,1)),console.log(n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i}).call(e,i(0))},function(t,e,i){t.exports=i.p+"_/audio/audio11.80a1c365597777dd80a456a21ef550a6.mp3"},,function(t,e){t.exports="varying float ratio;\r\nvarying float time;\r\n\r\n\r\nvoid main() {\r\n  gl_FragColor = vec4(255./255.,250./255.,111./255.,1.);\r\n\t//gl_FragColor = vec4((1.-ratio)/7.+0.62,(1.-ratio)/4.+0.2, (1.-ratio)/4.+0.75, 1.);\t\r\n}"},function(t,e){t.exports="uniform float u_time;\r\nuniform float u_maxSize;\r\nuniform float u_amps;\r\n\r\nattribute float rank;\r\nattribute vec3 translation;\r\nattribute vec3 scale;\r\nattribute float timeOffset;\r\nattribute float diviserOffset;\r\n\r\nvarying vec3 newPosition;\r\nvarying float ratio;\r\nvarying float time;\r\nvarying float amps;\r\nvarying float noise;\r\n\r\nvec3 transform(inout vec3 position, vec3 translation, vec3 scale, float timeOffset, float diviserOffset){\r\n\r\n  ratio = rank/u_maxSize;\r\n\r\n  position.x = position.x ;\r\n  position.y = cos(position.x/(10.+diviserOffset)+u_time*(3.))*(50.+(u_amps/2.));\r\n  position.z = sin(position.x/(10.+diviserOffset)+u_time*(3.))*(50.) ;\r\n\r\n  position += translation;\r\n  position *= scale;\r\n\r\n  return position;\r\n}\r\n\r\nvoid main() {\r\n  time = u_time;\r\n\tgl_PointSize = 1.0;\r\n  newPosition = position;\r\n\r\n  transform(newPosition, translation, scale, timeOffset, diviserOffset);\r\n  \tgl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\r\n}"},function(t,e){t.exports="varying float ratio;\n\nvoid main() {\n\n\tgl_FragColor = vec4(ratio/5.+0.7,ratio/2.5+0.2, ratio/4.+0.75, 1.);\t\n}"},function(t,e){t.exports="uniform float u_time;\nuniform float u_maxSize;\nattribute float rank;\nuniform float u_amps;\n\nvarying vec3 newPosition;\nvarying float ratio;\nvarying float time;\nvarying float amps;\nvarying float noise;\nvoid main() {\n  time = u_time;\n  ratio = rank/u_maxSize;\n  amps = u_amps;\n\n\tgl_PointSize = 1.0;\n\tnewPosition.x = position.x *60.;\n\tnewPosition.y = position.y * cos(position.x/2.+(u_time*1.5))*((ratio*(10.+u_amps/7.)))*sin(position.x*2.+position.y/6.3+u_time/20.);\n\tnewPosition.z = position.z*(ratio*30.);\n\n\n  \tgl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);\n}"}],[3]);