webpackJsonp([0],[,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={map:function(e,t,n,i,r){return(e-t)/(n-t)*(r-i)+i},hex2rgb:function(e){return e="#"==e.substr(0,1)?e.substr(1):e,[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)]},toRadians:function(e){return e*(Math.PI/180)},toDegree:function(e){return e*(180/Math.PI)},increasePercent:function(e,t){return(t-e)/e*100},previsionnalCalcul:function(e,t){return e+(t-e)/5*18},calcPercent:function(e,t){return e/t*100}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={arrAverage:function(e){return e.reduce(function(e,t){return e+t})/e.length},map:function(e,t,n,i,r){return(e-t)/(n-t)*(r-i)+i},displacement:function(e,t,n,i){for(var r=0;r<e;r++)n[r].x+=(t[r].x-n[r].x)*i,n[r].y+=(t[r].y-n[r].y)*i,n[r].z+=(t[r].z-n[r].z)*i}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r=function(e){return e&&e.__esModule?e:{default:e}}(i),a={getCountryData:function(e){return fetch(r.default,{method:"get"}).then(function(e){if(200===e.status)return e.json()})}};t.default=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=n(2),u=(i(l),n(1)),c=i(u),d=n(3),h=(i(d),n(13)),f=i(h),v=n(11),p=i(v),m=n(6),y=(i(m),function(e){function t(e,n,i){r(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.iceArr=window.STORAGE.icefloe,s.overlay=document.querySelector(".overlay"),s.overlayText=document.querySelector(".overlay_co2"),s.overlayYear=document.querySelector(".overlay_year"),s.fixDataContainer=document.querySelector(".fix_data-container"),s.yearArr=i,s.valueArr=n,s.valueMax=Math.max.apply(Math,s.valueArr),s.valueMin=Math.min.apply(Math,s.valueArr),s.nbPoint=e,s.containerTimeline=document.querySelector(".container-ui"),s.containerTimelineW=s.containerTimeline.clientWidth,s.containerTimelineH=s.containerTimeline.clientHeight,s.canvasTimeline=s.containerTimeline.querySelector("#canvasTimeline"),s.canvasTimeline.width=s.containerTimelineW,s.canvasTimeline.height=s.containerTimelineH,s.posX=5,s.posY=95,s.pointEquidistance=s.containerTimelineW/s.nbPoint,s.canvasTimeline.style.height=s.containerTimelineH,s.ctx=s.canvasTimeline.getContext("2d"),s.cursor=document.querySelector(".cursor"),s.cursorBar=document.querySelector(".cursor-line-move"),s.eventsList=["drag","dragup"],s.pointArr=[],s.dataCircleArr=[],s.pathPosArr=[],s.firstYear=1961,s.drawPoint(),s.drawLines(),s.drag(),s}return s(t,e),o(t,[{key:"createPosArr",value:function(){for(var e=0;e<this.nbPoint;e++){var t=[],n=[],i=c.default.map(this.valueArr[e],this.valueMin,this.valueMax,95,5);t.push(this.posX,i),n.push(this.posX,i,this.valueArr[e],this.firstYear),this.posX+=this.pointEquidistance,this.firstYear++,this.pathPosArr.push(t),this.dataCircleArr.push(n)}}},{key:"drawPoint",value:function(){for(var e=0;e<this.nbPoint;e++){var t=c.default.map(this.valueArr[e],this.valueMin,this.valueMax,95,5),n=new f.default(this.posX,t,this.valueArr[e]);n.draw(this.ctx),this.pointArr.push(n),this.posX+=this.pointEquidistance}}},{key:"drawLines",value:function(){this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(this.pointArr[0].xPos,this.pointArr[0].yPos);for(var e=0;e<this.pointArr.length;e++)this.ctx.lineTo(this.pointArr[e].xPos,this.pointArr[e].yPos);this.ctx.strokeStyle="#56F7FD",this.ctx.lineWidth=3,this.ctx.stroke(),this.ctx.restore()}},{key:"drag",value:function(){function e(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}var t=this;this.cursor.addEventListener("mousedown",function(e){t.activeDrag=!0}),window.addEventListener("mouseup",function(e){t.fixDataContainer.classList.remove("is_hidden"),t.containerTimeline.classList.remove("is-grabbing"),t.activeDrag=!1,document.querySelector("body").classList.remove("is-grabbing"),t.overlay.classList.remove("is_scrolling"),t.dispatch("dragup")}),window.addEventListener("mousemove",function(n){if(t.activeDrag){t.fixDataContainer.classList.add("is_hidden"),document.querySelector("body").classList.add("is-grabbing"),t.containerTimeline.classList.add("is-grabbing"),t.overlay.classList.add("is_scrolling");var i=n.clientX-window.innerWidth/8,r=Math.floor(i/t.pointEquidistance);if(t.current=r,STORAGE.currentPos=t.current,r>=0&&r<t.valueArr.length-1){t.overlayText.innerText=e(t.valueArr[r])+" kt",t.overlayYear.innerText=t.yearArr[r];var a=t.pointArr[r],s=t.pointArr[r+1],o=(s.yPos-a.yPos)/(s.xPos-a.xPos),l=s.yPos-o*s.xPos;t.cursor.setAttribute("data-value",""+e(t.valueArr[r])),t.cursor.setAttribute("style","top:"+(o*i+l)+"; transform:translateX("+i+"px);"),t.cursorBar.setAttribute("style","transform:translateX("+i+"px);"),t.dispatch("drag")}}})}}]),t}(p.default));t.default=y},function(e,t,n){e.exports=n.p+"datas/datafinal.5f59904feb99576e8e548452508277f9.json"},,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),o=i(s),l=n(5),u=(i(l),n(20)),c=i(u),d=n(1),h=i(d),f=n(3),v=i(f),p=n(14),m=i(p),y=n(4),x=(i(y),function(){function e(){var t=this;r(this,e),window.STORAGE={},STORAGE.particuleNb=1e4,this.datas=[],this.index=0,this.container=document.querySelector(".container_data"),this.overlay=document.querySelector(".overlay"),this.overlayText=document.querySelector(".overlay_co2"),this.overlayYear=document.querySelector(".overlay_year"),this.containerMaxCo2=document.querySelector(".maxco2"),this.containerMinCo2=document.querySelector(".minco2"),this.containerPercentageCo2=document.querySelector(".percentageco2"),this.containerAverrageCo2=document.querySelector(".averrageco2"),this.maxco2Number=this.containerMaxCo2.querySelector(".fix_data-number"),this.maxco2Text=this.containerMaxCo2.querySelector(".fix_data-text"),this.minco2Number=this.containerMinCo2.querySelector(".fix_data-number"),this.minco2Text=this.containerMinCo2.querySelector(".fix_data-text"),this.averrageco2Number=this.containerAverrageCo2.querySelector(".fix_data-number"),this.averrageco2Text=this.containerAverrageCo2.querySelector(".fix_data-text"),this.percentageco2Number=this.containerPercentageCo2.querySelector(".fix_data-number"),this.percentageco2Text=this.containerPercentageCo2.querySelector(".fix_data-text"),this.barCo2Actif=0,this.barYearActif=0,this.isScrolling=!1,this.valueArr=[],this.yearArr=[],this.worldArr=[],this.valueMax=0,this.valueMin=0,this.worldMax=0,this.worldMin=0,this.yearWithMaxValue=0,this.yearWithMinValue=0,this.averrageValue=0,this.averrageWorld=0,this.lastValue=0,v.default.getCountryData().then(function(e){return t.datas=e}).then(function(){function e(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}var n=t.datas.World,i=t.datas.World,r=100/(i.length-1);i.map(function(e,n){t.valueArr.push(parseInt(e.value))}),n.map(function(e,n){t.worldArr.push(parseInt(e.value))}),t.valueMax=Math.max.apply(Math,t.valueArr),t.valueMin=Math.min.apply(Math,t.valueArr),t.averrageValue=o.default.arrAverage(t.valueArr),t.worldMax=Math.max.apply(Math,t.worldArr),t.worldMin=Math.min.apply(Math,t.worldArr),t.averrageWorld=o.default.arrAverage(t.worldArr),i.map(function(e,n){var i=h.default.map(e.value,t.valueMin,t.valueMax,10,t.container.clientHeight),a=document.createElement("div");a.classList.add("element_data"),a.setAttribute("data-value",Math.floor(e.value)),a.setAttribute("data-year",e.year),a.style.width=r+"%",a.style.height=i+"px",0===n&&a.classList.add("is_active"),t.container.appendChild(a)}),console.log("max co2 en France",t.valueMax),console.log("min co2 en france",t.valueMin),console.log("max co2 dans le monde ",t.worldMax),console.log("min co2 dans le monde ",t.worldMin);var a="'"+t.valueMin+"'",s="'"+t.valueMax+"'",l=t.valueArr[t.valueArr.length-6],u=t.valueArr[t.valueArr.length-1],c=document.querySelector("[data-value="+a+"]"),d=document.querySelector("[data-value="+s+"]");t.yearWithMaxValue=d.dataset.year,t.yearWithMinValue=c.dataset.year,console.log("année du co2 le plus haut en france : ",t.yearWithMaxValue),console.log("année du co2 le plus bas en france : ",t.yearWithMinValue),console.log("année du co2 le plus dans le monde : 2014"),console.log("kt co2 global en France",Math.round(t.averrageValue)),console.log("global increase  or decrease en france : ",h.default.increasePercent(t.valueArr[0],t.valueArr[t.valueArr.length-1])),console.log("kt co2 global dans le monde : ",Math.round(t.averrageWorld)),console.log("global increase  or decrease dans le monde : ",h.default.increasePercent(t.worldArr[0],t.worldArr[t.worldArr.length-1])),console.log("en 2027 la valeur en kilotone sera de :",h.default.previsionnalCalcul(l,u)),console.log("en 2014 le pourcentage de  kilotone comparé au monde est de :",Math.floor(h.default.calcPercent(t.valueArr[t.valueArr.length-1],t.worldArr[t.worldArr.length-1]))),t.maxco2Number.innerText=e(t.valueMax)+" kt ("+t.yearWithMaxValue+")",t.minco2Number.innerText=e(t.valueMin)+" kt ("+t.yearWithMinValue+")",t.averrageco2Number.innerText=e(Math.floor(t.averrageValue))+" kt",t.percentageco2Number.innerText=Math.floor(h.default.increasePercent(t.worldArr[0],t.worldArr[t.worldArr.length-1]))+"%",t.initYear(),STORAGE.valuelength=t.valueArr.length,STORAGE.valueArray=t.valueArr,STORAGE.yearArray=t.yearArr;new m.default;t.lastValue=t.valueArr[0],t.slides=document.querySelectorAll(".element_data")})}return a(e,[{key:"initYear",value:function(){for(var e=1961,t=0;t<this.valueArr.length;t++)this.yearArr.push(e),e++}},{key:"scroll",value:function(){function e(e){if(e.wheelDelta>0){if(0===t)return;n.overlay.classList.add("is_scrolling"),t--,n.slides[t+1].classList.remove("is_active"),n.slides[t].classList.remove("is_previous"),n.slides[t].classList.add("is_active"),n.barCo2Actif=n.slides[t].dataset.value,n.barYearActif=n.slides[t].dataset.year,n.overlayText.innerText=n.barCo2Actif,n.overlayYear.innerText=n.barYearActif,console.log("global increase  or decrease en france depuis 1960 jusquen:",h.default.increasePercent(n.valueArr[0],n.barCo2Actif)),console.log("global increase  or decrease en france entre ancienne et currentValue:",h.default.increasePercent(n.lastValue,n.barCo2Actif))}else{if(n.overlay.classList.add("is_scrolling"),t===n.slides.length-1)return;t++,n.slides[t-1].classList.remove("is_active"),n.slides[t-1].classList.add("is_previous"),n.slides[t].classList.add("is_active"),n.barCo2Actif=n.slides[t].dataset.value,n.barYearActif=n.slides[t].dataset.year,n.overlayText.innerText=n.barCo2Actif,n.overlayYear.innerText=n.barYearActif,console.log("global increase  ojr decrease en france depuis 1960 jusquen:",h.default.increasePercent(n.valueArr[0],n.barCo2Actif)),console.log("global increase  or decrease en france entre ancienne et currentValue:",h.default.increasePercent(n.lastValue,n.barCo2Actif))}}var t=0,n=this;document.body.addEventListener("mousewheel",c.default.throttle(e,80,!0))}},{key:"scrollStop",value:function(){var e,t=this;window.addEventListener("mousewheel",function(n){window.clearTimeout(e),e=setTimeout(function(){console.log("Scrolling has stopped."),t.lastValue=t.barCo2Actif,t.overlay.classList.remove("is_scrolling")},500)},!1)}},{key:"hoverBar",value:function(){for(var e=0;e<this.slides.length;e++)this.slides[e].addEventListener("mouseover",function(){this.classList.add("is-hover")}),this.slides[e].addEventListener("mouseout",function(){this.classList.remove("is-hover")})}}]),e}());t.default=x},function(e,t){},function(e,t,n){"use strict";n(8);var i=n(7),r=function(e){return e&&e.__esModule?e:{default:e}}(i);window.app=new r.default},function(e,t,n){"use strict";var i,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,o){"object"===a(t)&&void 0!==e?e.exports=o():(i=o,void 0!==(r="function"==typeof i?i.call(t,n,t,e):i)&&(e.exports=r))}(0,function(){var e=function e(){function t(e){return r.appendChild(e.dom),e}function n(e){for(var t=0;t<r.children.length;t++)r.children[t].style.display=t===e?"block":"none";i=e}var i=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",function(e){e.preventDefault(),n(++i%r.children.length)},!1);var a=(performance||Date).now(),s=a,o=0,l=t(new e.Panel("FPS","#0ff","#002")),u=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:r,addPanel:t,showPanel:n,begin:function(){a=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(u.update(e-a,200),e>s+1e3&&(l.update(1e3*o/(e-s),100),s=e,o=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:r,setMode:n}};return e.Panel=function(e,t,n){var i=1/0,r=0,a=Math.round,s=a(window.devicePixelRatio||1),o=80*s,l=48*s,u=3*s,c=2*s,d=3*s,h=15*s,f=74*s,v=30*s,p=document.createElement("canvas");p.width=o,p.height=l,p.style.cssText="width:80px;height:48px";var m=p.getContext("2d");return m.font="bold "+9*s+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,o,l),m.fillStyle=t,m.fillText(e,u,c),m.fillRect(d,h,f,v),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(d,h,f,v),{dom:p,update:function(l,y){i=Math.min(i,l),r=Math.max(r,l),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,o,h),m.fillStyle=t,m.fillText(a(l)+" "+e+" ("+a(i)+"-"+a(r)+")",u,c),m.drawImage(p,d+s,h,f-s,v,d,h,f-s,v),m.fillRect(d+f-s,h,s,v),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(d+f-s,h,s,a((1-l/y)*v))}}},e})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){r(this,e),this.events={}}return a(e,[{key:"eventExist",value:function(e,t){var n=!1;if(this.events[e])for(var i=0;i<this.events[e].length;i++)this.events[e]==t&&(n=!0);return n}},{key:"dispatch",value:function(e){for(var t=e instanceof Array?e:[e],n=0;n<t.length;n++)if(this.events[t[n]]&&this.events[t[n]].length)for(var i=0;i<this.events[t[n]].length;i++){var r=this.events[t[n]][i];r.call(this)}}},{key:"on",value:function(e,t){void 0===this.events[e]&&parseInt(this.eventsList.indexOf(e))>=0&&(this.events[e]=[]),this.events[e]&&!this.eventExist(e,t)&&this.events[e].push(t)}},{key:"off",value:function(e,t){if(this.events[e])for(i=0;i<this.events[e].length;i++)this.events[e][i]==t&&this.events[e].slice(i,1)}}]),e}();t.default=s},function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function t(e){n(this,t),this.scene=e,this.iceArr=[],this.init(),this.posX}return i(t,[{key:"init",value:function(t,n,i,r,a,s){var o=new e.CylinderGeometry(5,5,2,5,1,!1,0,6.3),l=new e.MeshBasicMaterial({color:16777215}),u=new e.Mesh(o,l);u.position.set(t,n,0),u.scale.set(i,r,a),u.rotation.x=1.5,u.rotation.y=s,this.iceArr.push(u),this.scene.add(u)}},{key:"update",value:function(){for(var e=-.005*Math.random()+.01,t=0;t<this.iceArr.length;t++)this.iceArr[t].rotation.z=Math.sin(8e-4*Date.now())*Math.PI*.02,this.iceArr[t].rotation.x=1.5+Math.sin(.001*Date.now()+e)*Math.PI*.01}}]),t}();t.default=r}).call(t,n(0))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r){i(this,e),this.value=r,this.xPos=t,this.yPos=n}return r(e,[{key:"draw",value:function(e){e.save(),e.beginPath(),e.globalAlpha=0,e.translate(this.xPos,this.yPos),e.arc(0,0,1,0,2*Math.PI),e.strokeStyle="#56F7FD",e.stroke(),e.closePath(),e.restore()}}]),e}();t.default=a},function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),o=(i(s),n(1)),l=i(o),u=n(6),c=i(u),d=n(10),h=i(d),f=n(16),v=(i(f),n(22)),p=i(v),m=n(21),y=i(m),x=n(19),g=(i(x),n(18)),A=i(g),w=n(4),b=i(w),M=n(12),P=i(M),_=n(15),S=i(_),T=function(){function t(){r(this,t),this.stats=new h.default,this.stats.showPanel(0),document.body.appendChild(this.stats.dom),this.isDrag=!1,this.valueMax=Math.max.apply(Math,STORAGE.valueArray),this.valueMin=Math.min.apply(Math,STORAGE.valueArray),this.mouse=new e.Vector3(0,0,0),this.direction_mouse=new e.Vector3(0,0,0),this.cameraPosition_mouse=new e.Vector3(0,0,0),this.cameraEasing_mouse=10,this.fov=45,this.camera=new e.PerspectiveCamera(this.fov,window.innerWidth/window.innerHeight,1,4e3),this.camera.position.z=50,this.camera.position.y=-200,this.camera.lookAt(new e.Vector3(0,0,0)),this.hemisphereLight=new e.HemisphereLight(16777215,0,1),this.color=new e.Color("#C2F1F2"),this.colorDark=new e.Color("#3468a2"),this.sceneW=window.innerWidth,this.sceneH=window.innerHeight,this.scene=new e.Scene,this.scene.fog=new e.Fog(9887970,100,800),this.init(),this.initEvent(),this.initTimeline(),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize()}return a(t,[{key:"init",value:function(){this.container=document.querySelector("#main"),document.body.appendChild(this.container),this.scene.add(this.hemisphereLight),this.scene.background=this.color,this.geometry=new e.SphereGeometry(5,7,7),this.material=new e.MeshPhongMaterial({color:0}),this.sphere=new e.Mesh(this.geometry,this.material),this.initSea(),this.initSnow(),this.initIceFloe(),this.renderer=new e.WebGLRenderer({antialias:!1}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.container.appendChild(this.renderer.domElement),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=e.PCFSoftShadowMap,this.renderer.animate(this.render.bind(this))}},{key:"initSea",value:function(){var t=this;this.meshSea=new e.Object3D;var n=new e.PlaneBufferGeometry(2e3,2e3,1,1);this.shaderSea=new e.ShaderMaterial({uniforms:e.UniformsUtils.merge([e.UniformsLib.common,e.UniformsLib.specularmap,e.UniformsLib.envmap,e.UniformsLib.aomap,e.UniformsLib.lightmap,e.UniformsLib.ambient,e.UniformsLib.lights,e.UniformsLib.fog,{uTime:{type:"f",value:0},diffuse:{value:new e.Color(3062719)},uMap:{type:"t",value:null}}]),vertexShader:p.default,fragmentShader:y.default,side:e.DoubleSide,fog:!0,lights:!0,transparent:!0,defines:{USE_MAP:!1}}),this.material2=new e.MeshPhongMaterial({color:3177949}),(new e.TextureLoader).load(A.default,function(n){t.shaderSea.uniforms.uMap.value=n,n.wrapS=e.RepeatWrapping,n.wrapT=e.RepeatWrapping}),this.meshSea=new e.Mesh(n,this.shaderSea);var i=new e.PlaneBufferGeometry(2e3,2e3,1,1),r=(new e.MeshPhongMaterial({color:0,flatShading:!0}),new e.Mesh(i,this.material2));r.position.set(0,0,-10),r.castShadow=!1,r.receiveShadow=!0,this.meshSea.add(r),this.scene.add(this.meshSea)}},{key:"initSnow",value:function(){this.snow=new S.default(this.scene),console.log(this.snow.systemMaterial.uniforms.speedH.value),this.speedHarr=[],this.speedVarr=[],this.scaleArr=[],this.radiusXArr=[],this.radiusZArr=[],this.sizeArr=[];for(var e=0;e<STORAGE.valueArray.length;e++){var t=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,1.1,.2);this.speedHarr.push(t);var n=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,1.1,.2);this.speedVarr.push(n);var i=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,7.1,5.1);this.scaleArr.push(i);var r=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,2.1,2.5);this.radiusXArr.push(r);var a=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,2.1,2.5);this.radiusZArr.push(a);var s=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,65,45);this.sizeArr.push(s)}}},{key:"initIceFloe",value:function(){this.icefloe=new P.default(this.scene),this.icefloe.init(-20,150,6.5,4.5,4.5,0),this.icefloe.init(40,180,3.5,6,4,1),this.icefloe.init(70,250,6,4,4,0),this.icefloe.init(-60,200,3.5,6,4,3.9),this.icefloe.init(-10,280,8.5,5.5,6.5,0),this.icefloe.init(60,330,2.5,6,4,3.5),this.icefloe.init(-90,430,5.5,4.5,6.5,0),this.iceArr=this.icefloe.iceArr,this.icePosZ2=[],this.icePosZ1=[],this.icePosX1=[],this.icePosZ3=[],this.icePosY3=[],this.icePosX3=[],this.icePosZ4=[],this.icePosY4=[],this.icePosX4=[],this.icePosZ5=[],this.icePosY5=[],this.icePosX5=[],this.icePosY6=[],this.icePosZ6=[],this.icePosY7=[],this.icePosX7=[],this.icePosZ7=[];for(var e=0;e<STORAGE.valueArray.length;e++){var t=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,0,-20);this.icePosZ2.push(t);var n=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,0,-5);this.icePosZ1.push(n);var i=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,-20,0);this.icePosX1.push(i);var r=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,0,-10);this.icePosZ3.push(r);var a=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,250,200);this.icePosY3.push(a);var s=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,70,40);this.icePosX3.push(s);var o=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,0,-60);this.icePosZ4.push(o);var u=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,200,210);this.icePosY4.push(u);var c=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,-60,-45);this.icePosX4.push(c);var d=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,0,-1);this.icePosZ5.push(d);var h=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,280,240);this.icePosY5.push(h);var f=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,-10,-35);this.icePosX5.push(f);var v=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,330,300);this.icePosY6.push(v);var p=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,0,-40);this.icePosZ6.push(p);var m=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,430,390);this.icePosY7.push(m);var y=l.default.map(STORAGE.valueArray[e],this.valueMin,this.valueMax,-90,-70);this.icePosX7.push(y)}}},{key:"initTimeline",value:function(){var e=this,t=new b.default(STORAGE.valuelength,STORAGE.valueArray,STORAGE.yearArray);t.on("drag",function(){e.isDrag=!0,c.default.to(e.camera,.5,{fov:55,onUpdate:function(){e.camera.updateProjectionMatrix()}}),c.default.to(e.iceArr[1].position,1,{z:e.icePosZ1[STORAGE.currentPos]}),c.default.to(e.iceArr[1].position,1,{x:e.icePosX1[STORAGE.currentPos]}),c.default.to(e.iceArr[2].position,1,{z:e.icePosZ2[STORAGE.currentPos]}),c.default.to(e.iceArr[3].position,1,{z:e.icePosZ3[STORAGE.currentPos]}),c.default.to(e.iceArr[3].position,1,{y:e.icePosY3[STORAGE.currentPos]}),c.default.to(e.iceArr[3].position,1,{x:e.icePosX3[STORAGE.currentPos]}),c.default.to(e.iceArr[4].position,2,{z:e.icePosZ4[STORAGE.currentPos]}),c.default.to(e.iceArr[4].position,1,{y:e.icePosY4[STORAGE.currentPos]}),c.default.to(e.iceArr[4].position,2,{x:e.icePosX4[STORAGE.currentPos]}),c.default.to(e.iceArr[5].position,1.3,{z:e.icePosZ5[STORAGE.currentPos]}),c.default.to(e.iceArr[5].position,.7,{y:e.icePosY5[STORAGE.currentPos]}),c.default.to(e.iceArr[5].position,1,{x:e.icePosX5[STORAGE.currentPos]}),c.default.to(e.iceArr[6].position,.6,{y:e.icePosY6[STORAGE.currentPos]}),c.default.to(e.iceArr[6].position,1,{z:e.icePosZ6[STORAGE.currentPos]}),c.default.to(e.iceArr[7].position,1.5,{y:e.icePosY7[STORAGE.currentPos]}),c.default.to(e.iceArr[7].position,1.5,{x:e.icePosX7[STORAGE.currentPos]}),e.snow.systemMaterial.uniforms.speedH.value=e.speedHarr[STORAGE.currentPos],e.snow.systemMaterial.uniforms.speedV.value=e.speedVarr[STORAGE.currentPos],e.snow.systemMaterial.uniforms.scale.value=e.scaleArr[STORAGE.currentPos],e.snow.systemMaterial.uniforms.radiusX.value=e.radiusXArr[STORAGE.currentPos],e.snow.systemMaterial.uniforms.radiusZ.value=e.radiusZArr[STORAGE.currentPos],e.snow.systemMaterial.uniforms.size.value=e.sizeArr[STORAGE.currentPos]}),t.on("dragup",function(){e.isDrag=!1,c.default.to(e.camera,.5,{fov:e.fov,onUpdate:function(){e.camera.updateProjectionMatrix()}})})}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"initEvent",value:function(){var e=this;window.addEventListener("mousemove",function(t){t.preventDefault(),e.mouse.x=t.clientX/window.innerWidth*2-1,e.mouse.y=-t.clientY/window.innerHeight*2+1},!1)}},{key:"render",value:function(){this.stats.update();var e=5e-4*performance.now();this.shaderSea.uniforms.uTime.value=e,this.isDrag,this.direction_mouse.subVectors(this.mouse,this.cameraPosition_mouse),this.direction_mouse.multiplyScalar(.06),this.cameraPosition_mouse.addVectors(this.cameraPosition_mouse,this.direction_mouse),this.camera.position.x=this.cameraPosition_mouse.x*this.cameraEasing_mouse*-1,this.camera.position.y=this.cameraPosition_mouse.y*this.cameraEasing_mouse*-1,this.snow.update(),this.icefloe.update(),this.renderer.render(this.scene,this.camera)}}]),t}();t.default=T}).call(t,n(0))},function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(17),o=i(s),l=n(24),u=i(l),c=n(23),d=i(c),h=function(){function t(n){r(this,t),this.scene=n,this.particleSystemHeight=100,this.numParticles=4e3,this.isLoad=!1,this.clock=new e.Clock,this.width=100,this.height=this.particleSystemHeight,this.depth=100,this.parameters={color:16777215,height:this.particleSystemHeight,radiusX:2.5,radiusZ:2.5,size:85,scale:7,opacity:.7,speedH:1,speedV:1},this.init()}return a(t,[{key:"init",value:function(){function t(e){return e*(Math.random()-.5)}var n=this,i=new e.TextureLoader;this.uniforms={color:{type:"c",value:new e.Color(this.parameters.color)},height:{type:"f",value:this.parameters.height},elapsedTime:{type:"f",value:0},radiusX:{type:"f",value:this.parameters.radiusX},radiusZ:{type:"f",value:this.parameters.radiusZ},size:{type:"f",value:this.parameters.size},scale:{type:"f",value:this.parameters.scale},opacity:{type:"f",value:this.parameters.opacity},texture:{type:"t",value:null},speedH:{type:"f",value:this.parameters.speedH},speedV:{type:"f",value:this.parameters.speedV}},this.systemMaterial=new e.ShaderMaterial({uniforms:this.uniforms,vertexShader:u.default,fragmentShader:d.default,blending:e.AdditiveBlending,transparent:!0,depthTest:!1}),i.load(o.default,function(i){n.uniforms.texture.value=i,n.isLoad=!0,n.textureSnow=i,n.systemGeometry=new e.Geometry;for(var r=0;r<n.numParticles;r++){var a=new e.Vector3(t(n.width),Math.random()*n.height,t(n.depth));n.systemGeometry.vertices.push(a)}n.particleSystem=new e.Points(n.systemGeometry,n.systemMaterial),n.particleSystem.position.x=10,n.particleSystem.rotation.x=.5,n.scene.add(n.particleSystem)})}},{key:"update",value:function(){if(this.isLoad){if(this.needsUpdate){this.systemGeometry.vertices.length,this.numParticles;this.systemGeometry.vertices.needsUpdate=!0,this.needsUpdate=!1}var e=(this.clock.getDelta(),this.clock.getElapsedTime());this.particleSystem.material.uniforms.elapsedTime.value=10*e}}}]),t}();t.default=h}).call(t,n(0))},,function(e,t,n){e.exports=n.p+"textures/snowParticle.e2f8b36ed78ce386a8cfbad889947db2.png"},function(e,t,n){e.exports=n.p+"textures/water-zelda.aa2b428139faa6fc79b1a0b9e97dd304.png"},,,function(e,t){e.exports="uniform vec3 diffuse;\nvarying vec2 vUv;\nuniform sampler2D uMap;\nuniform float uTime;\n\n#ifndef FLAT_SHADED\n\nvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\tvec2 uv = vUv * 35.0 + vec2(uTime * -0.05);\n\tuv.y += 0.01 * (sin(uv.x * 3.5 + uTime * 0.35) + sin(uv.x * 4.8 + uTime * 1.05) + sin(uv.x * 7.3 + uTime * 0.45)) / 3.0;\n\tuv.x += 0.12 * (sin(uv.y * 4.0 + uTime * 0.5) + sin(uv.y * 6.8 + uTime * 0.75) + sin(uv.y * 11.3 + uTime * 0.2)) / 3.0;\n\tuv.y += 0.12 * (sin(uv.x * 4.2 + uTime * 0.64) + sin(uv.x * 6.3 + uTime * 1.65) + sin(uv.x * 8.2 + uTime * 0.45)) / 3.0;\n\n\tvec4 tex1 = texture2D(uMap, uv * 1.0);\n\tvec4 tex2 = texture2D(uMap, uv * 1.5 + vec2(0.2));\n\n\tvec3 blue = diffuse;\n\n\tvec4 diffuseColor = vec4(blue + vec3(tex1.a * 0.4 - tex2.a * 0.02), 1.0);\n\tdiffuseColor.a = 0.8;\n\t//vec4 diffuseColor = vec4( diffuse, 1.0 );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t#else\n\n\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}"},function(e,t){e.exports="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nuniform float uTime;\n#define SCALE 50.0\nvarying vec2 vUv;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n{\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n   i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n  + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n  + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n    dot(p2,x2), dot(p3,x3) ) );\n}\nfloat calculateSurface(float x, float z) {\n  float y = 0.0;\n  y += sin(x * 2.8 / SCALE + uTime * 1.5);\n  y += sin(z * 2.45 / SCALE + uTime * 1.7);\n  return y;\n}\n\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\n  vUv = uv;\n\n  float strength = 1.0;\n  transformed.y += strength * calculateSurface(transformed.x, transformed.z);\n  transformed.y -= strength * calculateSurface(0.0, 0.5);\n\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n\n}"},function(e,t){e.exports="uniform vec3 color;\nuniform float opacity;\nuniform sampler2D texture;\n\nvoid main() {\n\tvec4 texColor = texture2D( texture, gl_PointCoord );\n\tgl_FragColor = texColor * vec4( color, opacity );\n}"},function(e,t){e.exports="uniform float radiusX;\n\t\t\tuniform float radiusZ;\n\t\t\tuniform float size;\n\t\t\tuniform float scale;\n\t\t\tuniform float height;\n\t\t\tuniform float elapsedTime;\n\t\t\tuniform float speedH;\n\t\t\tuniform float speedV;\n\n\t\t\tvoid main() {\n\t\t\t\tvec3 pos = position;\n\t\t\t\tpos.x += cos((elapsedTime + position.z) * 0.25 * speedH) * radiusX;\n\t\t\t\tpos.y = mod(pos.y - elapsedTime * speedV, height);\n\t\t\t\tpos.z += sin((elapsedTime + position.x) * 0.25 * speedH) * radiusZ;\n\n\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );\n\n\t\t\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t\t}"}],[9]);