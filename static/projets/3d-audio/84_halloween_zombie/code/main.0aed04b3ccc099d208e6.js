webpackJsonp([0],[,function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(33),r=i(s),c=n(4),h=(i(c),n(7)),u=(i(h),n(32)),d=n(37),l=(i(d),n(38)),f=(i(l),n(39)),m=(i(f),n(34)),p=(i(m),n(36)),g=(i(p),n(35)),b=(i(g),n(24)),v=i(b),y=n(25),w=i(y),x=n(22),E=i(x),k=n(23),T=i(k),P=n(10),O=i(P),j=n(11),M=i(j),L=n(12),A=i(L),_=n(13),S=i(_),N=n(14),C=i(N),R=n(15),D=i(R),F=n(19),q=i(F),I=n(21),H=i(I),K=n(20),U=i(K),z=n(8),B=i(z),V=n(9),Z=i(V),G=n(16),Y=i(G),W=n(18),X=(i(W),n(17)),J=(i(X),n(5)),Q=i(J),$=n(6),ee=i($),te=n(28),ne=i(te),ie=n(27),oe=i(ie),ae=n(30),se=i(ae),re=n(26),ce=i(re),he=n(29),ue=i(he),de=n(31),le=i(de),fe=function(){function t(){o(this,t),this.clock=new e.Clock,this.createRender(),this.createScene(),this.createGeometry(),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.onWindowResize(),this.renderer.animate(this.render.bind(this))}return a(t,[{key:"createRender",value:function(){this.renderer=new e.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(0,1),this.container=document.querySelector("#main"),document.body.appendChild(this.container),this.container.appendChild(this.renderer.domElement)}},{key:"startStats",value:function(){this.stats=new r.default,this.stats.domElement.style.position="absolute",this.container.appendChild(this.stats.domElement)}},{key:"createScene",value:function(){this.scene=new e.Scene,this.camera=new e.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,2e3),this.camera.position.set(-20,5,20),this.camera.rotation.y=70*Math.PI/180,this.camera.rotation.x=70*Math.PI/180,this.camera.lookAt(new e.Vector3(0,2,0)),this.controls=new e.OrbitControls(this.camera),this.controls.target=new e.Vector3(0,1,0),this.ambientLight=new e.AmbientLight(13421772,9),this.scene.add(this.ambientLight),this.scene.fog=new e.FogExp2(0,.3)}},{key:"createHelpers",value:function(){this.helper=new e.GridHelper(100,100),this.scene.add(this.helper)}},{key:"createPostProcessing",value:function(){this.composer=new e.EffectComposer(this.renderer),this.composer.addPass(new e.RenderPass(this.scene,this.camera)),this.effect=new e.ShaderPass(e.DotScreenShader),this.effect.uniforms.scale.value=4,this.composer.addPass(this.effect),this.effect2=new e.ShaderPass(e.RGBShiftShader),this.effect2.uniforms.amount.value=.0015,this.effect2.renderToScreen=!0,this.composer.addPass(this.effect2)}},{key:"createMusic",value:function(){var e=this;this.sound=new Q.default(ne.default,126,0,function(){e.sound.createKick({onKick:function(e){},offKick:function(e){}}).on(),e.sound.play()},!1),this.evilLaugh=new ee.default("evilLaugh","soundEvilLaugh",oe.default),this.mummy=new ee.default("mummy","soundMummy",se.default),this.crow=new ee.default("crow","SoundCrow",ce.default),this.wolf=new ee.default("wolf","SoundWolf",ue.default),this.monster=new ee.default("monster","SoundMonster",le.default)}},{key:"createGeometry",value:function(){var t=this;this.loadingManager=new e.LoadingManager,this.loaded=!1;var n=document.getElementById("loadingScreen");this.loadingManager.onProgress=function(e,i,o){n.className="onProgress";var a=document.getElementById("loading"),s=document.createElement("div");s.setAttribute("class","loadingbar");var r=document.createElement("div");s.appendChild(r),a.appendChild(s),r.style.left=i/o*100+"px",t.loaded=!0},this.loadingManager.onLoad=function(){1==t.loaded&&(t.createMusic(),setTimeout(function(){(new TimelineMax).to("#loading",.25,{top:"17px",ease:Power1.easeOut}).to(".loadingbar > div",.4,{width:"3px",left:"50px",ease:Power3.easeInOut}).to(".center",.3,{opacity:0}).to("#loadingScreen",.3,{opacity:0,ease:Power1.easeOut},.5).to(".twitter",.4,{opacity:1,y:10,ease:Power3.easeOut},1.7).to(".info",.4,{opacity:1,y:10,ease:Power3.easeOut},1.9);var e=new u.TimelineLite;e.to(".divMusic",0,{display:"block"},.4),e.staggerTo(".divMusic",.4,{rotation:360,y:10,opacity:.9},.2)},1e3))};var i=(new e.TextureLoader).load(w.default),o=new e.MeshPhysicalMaterial({map:i,side:e.DoubleSide});this.jsonLoader=new e.JSONLoader(this.loadingManager),this.jsonLoader.load(v.default,function(n){t.terrain=new e.Mesh(n,o),t.terrain.scale.set(.01,.01,.01),t.scene.add(t.terrain)});var a=(new e.TextureLoader).load(T.default),s=new e.MeshPhysicalMaterial({map:a,side:e.FrontSide});new e.JSONLoader(this.loadingManager);this.jsonLoader.load(E.default,function(n){t.potiron=new e.Mesh(n,s),t.potiron.scale.set(.01,.01,.01),t.scene.add(t.potiron)});var r=(new e.TextureLoader).load(M.default),c=new e.MeshPhysicalMaterial({map:r,side:e.FrontSide});this.jsonLoader=new e.JSONLoader(this.loadingManager),this.jsonLoader.load(O.default,function(n){t.granit01=new e.Mesh(n,c),t.granit01.scale.set(.01,.01,.01),t.scene.add(t.granit01)});var h=(new e.TextureLoader).load(S.default),d=new e.MeshPhysicalMaterial({map:h,side:e.FrontSide});this.jsonLoader=new e.JSONLoader(this.loadingManager),this.jsonLoader.load(A.default,function(n){t.granit02=new e.Mesh(n,d),t.granit02.scale.set(.01,.01,.01),t.scene.add(t.granit02)});var l=(new e.TextureLoader).load(D.default),f=new e.MeshPhysicalMaterial({map:l,side:e.FrontSide});this.jsonLoader=new e.JSONLoader(this.loadingManager),this.jsonLoader.load(C.default,function(n){t.granit03=new e.Mesh(n,f),t.granit03.scale.set(.01,.01,.01),t.scene.add(t.granit03)});var m=(new e.TextureLoader).load(H.default),p=(new e.TextureLoader).load(U.default),g=new e.MeshPhysicalMaterial({map:m,alphaMap:p,alphaTest:.5,side:e.DoubleSide});this.jsonLoader=new e.JSONLoader(this.loadingManager),this.jsonLoader.load(q.default,function(n){t.fougere=new e.Mesh(n,g),t.fougere.scale.set(.01,.01,.01),t.scene.add(t.fougere)});var b=(new e.TextureLoader).load(Z.default),y=new e.MeshPhysicalMaterial({map:b,side:e.DoubleSide});this.jsonLoader=new e.JSONLoader(this.loadingManager),this.jsonLoader.load(B.default,function(n){t.champignons=new e.Mesh(n,y),t.champignons.scale.set(.01,.01,.01),t.scene.add(t.champignons)}),this.action={},this.mixer,this.activeActionName,this.arrAnimations=["Thriller","ThrillerIdle"],new e.JSONLoader(this.loadingManager).load(Y.default,function(n,i){i.forEach(function(e){e.skinning=!0});var o=new e.SkinnedMesh(n,new e.MeshFaceMaterial(i));o.position.set(.7,0,-3.5),o.scale.set(.9,.9,.9),t.mixer=new e.AnimationMixer(o),t.action.Thriller=t.mixer.clipAction(n.animations[1]),t.action.ThrillerIdle=t.mixer.clipAction(n.animations[2]),t.action.Thriller.setEffectiveWeight(1),t.action.ThrillerIdle.setEffectiveWeight(1),t.action.Thriller.enabled=!0,t.action.ThrillerIdle.enabled=!0,t.activeActionName="ThrillerIdle",t.scene.add(o),t.fadeAction(t.arrAnimations[0],e.LoopOnce,36e3)})}},{key:"fadeAction",value:function(e,t,n){var i=this.action[e].fadeIn(15).play();i.enabled=!0,i.loop=t,i.loop===t&&setTimeout(function(){i.paused=!0},n)}},{key:"render",value:function(){this.controls.update();var e=this.clock.getDelta();void 0!==this.mixer&&this.mixer.update(e),this.renderer.render(this.scene,this.camera)}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}]),t}();t.default=fe}).call(t,n(0))},function(e,t){},function(e,t,n){"use strict";n(2);var i=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(i);window.app=new o.default},function(e,t,n){"use strict";(function(e){e.OrbitControls=function(t,n){function i(){return 2*Math.PI/60/60*C.autoRotateSpeed}function o(){return Math.pow(.95,C.zoomSpeed)}function a(e){U.theta-=e}function s(e){U.phi-=e}function r(t){C.object instanceof e.PerspectiveCamera?z/=t:C.object instanceof e.OrthographicCamera?(C.object.zoom=Math.max(C.minZoom,Math.min(C.maxZoom,C.object.zoom*t)),C.object.updateProjectionMatrix(),V=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),C.enableZoom=!1)}function c(t){C.object instanceof e.PerspectiveCamera?z*=t:C.object instanceof e.OrthographicCamera?(C.object.zoom=Math.max(C.minZoom,Math.min(C.maxZoom,C.object.zoom/t)),C.object.updateProjectionMatrix(),V=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),C.enableZoom=!1)}function h(e){Z.set(e.clientX,e.clientY)}function u(e){Q.set(e.clientX,e.clientY)}function d(e){W.set(e.clientX,e.clientY)}function l(e){G.set(e.clientX,e.clientY),Y.subVectors(G,Z);var t=C.domElement===document?C.domElement.body:C.domElement;a(2*Math.PI*Y.x/t.clientWidth*C.rotateSpeed),s(2*Math.PI*Y.y/t.clientHeight*C.rotateSpeed),Z.copy(G),C.update()}function f(e){$.set(e.clientX,e.clientY),ee.subVectors($,Q),ee.y>0?r(o()):ee.y<0&&c(o()),Q.copy($),C.update()}function m(e){X.set(e.clientX,e.clientY),J.subVectors(X,W),ie(J.x,J.y),W.copy(X),C.update()}function p(e){}function g(e){e.deltaY<0?c(o()):e.deltaY>0&&r(o()),C.update()}function b(e){switch(e.keyCode){case C.keys.UP:ie(0,C.keyPanSpeed),C.update();break;case C.keys.BOTTOM:ie(0,-C.keyPanSpeed),C.update();break;case C.keys.LEFT:ie(C.keyPanSpeed,0),C.update();break;case C.keys.RIGHT:ie(-C.keyPanSpeed,0),C.update()}}function v(e){Z.set(e.touches[0].pageX,e.touches[0].pageY)}function y(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);Q.set(0,i)}function w(e){W.set(e.touches[0].pageX,e.touches[0].pageY)}function x(e){G.set(e.touches[0].pageX,e.touches[0].pageY),Y.subVectors(G,Z);var t=C.domElement===document?C.domElement.body:C.domElement;a(2*Math.PI*Y.x/t.clientWidth*C.rotateSpeed),s(2*Math.PI*Y.y/t.clientHeight*C.rotateSpeed),Z.copy(G),C.update()}function E(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);$.set(0,i),ee.subVectors($,Q),ee.y>0?c(o()):ee.y<0&&r(o()),Q.copy($),C.update()}function k(e){X.set(e.touches[0].pageX,e.touches[0].pageY),J.subVectors(X,W),ie(J.x,J.y),W.copy(X),C.update()}function T(e){}function P(e){if(!1!==C.enabled){if(e.preventDefault(),e.button===C.mouseButtons.ORBIT){if(!1===C.enableRotate)return;h(e),I=q.ROTATE}else if(e.button===C.mouseButtons.ZOOM){if(!1===C.enableZoom)return;u(e),I=q.DOLLY}else if(e.button===C.mouseButtons.PAN){if(!1===C.enablePan)return;d(e),I=q.PAN}I!==q.NONE&&(document.addEventListener("mousemove",O,!1),document.addEventListener("mouseup",j,!1),C.dispatchEvent(D))}}function O(e){if(!1!==C.enabled)if(e.preventDefault(),I===q.ROTATE){if(!1===C.enableRotate)return;l(e)}else if(I===q.DOLLY){if(!1===C.enableZoom)return;f(e)}else if(I===q.PAN){if(!1===C.enablePan)return;m(e)}}function j(e){!1!==C.enabled&&(p(e),document.removeEventListener("mousemove",O,!1),document.removeEventListener("mouseup",j,!1),C.dispatchEvent(F),I=q.NONE)}function M(e){!1===C.enabled||!1===C.enableZoom||I!==q.NONE&&I!==q.ROTATE||(e.preventDefault(),e.stopPropagation(),g(e),C.dispatchEvent(D),C.dispatchEvent(F))}function L(e){!1!==C.enabled&&!1!==C.enableKeys&&!1!==C.enablePan&&b(e)}function A(e){if(!1!==C.enabled){switch(e.touches.length){case 1:if(!1===C.enableRotate)return;v(e),I=q.TOUCH_ROTATE;break;case 2:if(!1===C.enableZoom)return;y(e),I=q.TOUCH_DOLLY;break;case 3:if(!1===C.enablePan)return;w(e),I=q.TOUCH_PAN;break;default:I=q.NONE}I!==q.NONE&&C.dispatchEvent(D)}}function _(e){if(!1!==C.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===C.enableRotate)return;if(I!==q.TOUCH_ROTATE)return;x(e);break;case 2:if(!1===C.enableZoom)return;if(I!==q.TOUCH_DOLLY)return;E(e);break;case 3:if(!1===C.enablePan)return;if(I!==q.TOUCH_PAN)return;k(e);break;default:I=q.NONE}}function S(e){!1!==C.enabled&&(T(e),C.dispatchEvent(F),I=q.NONE)}function N(e){e.preventDefault()}this.object=t,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new e.Vector3(0,.3,0),this.minDistance=Math.PI,this.maxDistance=1.3*Math.PI,this.minZoom=0,this.maxZoom=1.7*Math.PI,this.minPolarAngle=0,this.maxPolarAngle=Math.PI/2.1,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!0,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!0,this.autoRotateSpeed=-.3,this.enableKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return K.phi},this.getAzimuthalAngle=function(){return K.theta},this.reset=function(){C.target.copy(C.target0),C.object.position.copy(C.position0),C.object.zoom=C.zoom0,C.object.updateProjectionMatrix(),C.dispatchEvent(R),C.update(),I=q.NONE},this.update=function(){var n=new e.Vector3,o=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),s=o.clone().inverse(),r=new e.Vector3,c=new e.Quaternion;return function(){var e=C.object.position;return n.copy(e).sub(C.target),n.applyQuaternion(o),K.setFromVector3(n),C.autoRotate&&I===q.NONE&&a(i()),K.theta+=U.theta,K.phi+=U.phi,K.theta=Math.max(C.minAzimuthAngle,Math.min(C.maxAzimuthAngle,K.theta)),K.phi=Math.max(C.minPolarAngle,Math.min(C.maxPolarAngle,K.phi)),K.makeSafe(),K.radius*=z,K.radius=Math.max(C.minDistance,Math.min(C.maxDistance,K.radius)),C.target.add(B),n.setFromSpherical(K),n.applyQuaternion(s),e.copy(C.target).add(n),C.object.lookAt(C.target),!0===C.enableDamping?(U.theta*=1-C.dampingFactor,U.phi*=1-C.dampingFactor):U.set(0,0,0),z=1,B.set(0,0,0),!!(V||r.distanceToSquared(C.object.position)>H||8*(1-c.dot(C.object.quaternion))>H)&&(C.dispatchEvent(R),r.copy(C.object.position),c.copy(C.object.quaternion),V=!1,!0)}}(),this.dispose=function(){C.domElement.removeEventListener("contextmenu",N,!1),C.domElement.removeEventListener("mousedown",P,!1),C.domElement.removeEventListener("wheel",M,!1),C.domElement.removeEventListener("touchstart",A,!1),C.domElement.removeEventListener("touchend",S,!1),C.domElement.removeEventListener("touchmove",_,!1),document.removeEventListener("mousemove",O,!1),document.removeEventListener("mouseup",j,!1),window.removeEventListener("keydown",L,!1)};var C=this,R={type:"change"},D={type:"start"},F={type:"end"},q={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},I=q.NONE,H=1e-6,K=new e.Spherical,U=new e.Spherical,z=1,B=new e.Vector3,V=!1,Z=new e.Vector2,G=new e.Vector2,Y=new e.Vector2,W=new e.Vector2,X=new e.Vector2,J=new e.Vector2,Q=new e.Vector2,$=new e.Vector2,ee=new e.Vector2,te=function(){var t=new e.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),B.add(t)}}(),ne=function(){var t=new e.Vector3;return function(e,n){t.setFromMatrixColumn(n,1),t.multiplyScalar(e),B.add(t)}}(),ie=function(){var t=new e.Vector3;return function(n,i){var o=C.domElement===document?C.domElement.body:C.domElement;if(C.object instanceof e.PerspectiveCamera){var a=C.object.position;t.copy(a).sub(C.target);var s=t.length();s*=Math.tan(C.object.fov/2*Math.PI/180),te(2*n*s/o.clientHeight,C.object.matrix),ne(2*i*s/o.clientHeight,C.object.matrix)}else C.object instanceof e.OrthographicCamera?(te(n*(C.object.right-C.object.left)/C.object.zoom/o.clientWidth,C.object.matrix),ne(i*(C.object.top-C.object.bottom)/C.object.zoom/o.clientHeight,C.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),C.enablePan=!1)}}();C.domElement.addEventListener("contextmenu",N,!1),C.domElement.addEventListener("mousedown",P,!1),C.domElement.addEventListener("wheel",M,!1),C.domElement.addEventListener("touchstart",A,!1),C.domElement.addEventListener("touchend",S,!1),C.domElement.addEventListener("touchmove",_,!1),window.addEventListener("keydown",L,!1),this.update()},e.OrbitControls.prototype=Object.create(e.EventDispatcher.prototype),e.OrbitControls.prototype.constructor=e.OrbitControls,Object.defineProperties(e.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})}).call(t,n(0))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,o,a){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];i(this,e),this.ctx;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.ctx=new AudioContext}catch(e){throw new Error("Web Audio API is not supported in this browser")}this._bpm=n,this._beatDuration=60/this._bpm,this._offsetTime=o,this._sections=[],this._kicks=[],this._beats=[],this._startTime=0,this._pauseTime=0,this._isPlaying=!1,this._isLoaded=!1,this._progress=0,this._onUpdate=this.onUpdate.bind(this),this._onEnded=this.onEnded.bind(this),this.gainNode=this.ctx.createGain(),this.gainNode.connect(this.ctx.destination),this.analyserNode=this.ctx.createAnalyser(),this.analyserNode.connect(this.gainNode),this.analyserNode.smoothingTimeConstant=.8,this.analyserNode.fftSize=512;var r=this.analyserNode.frequencyBinCount;this.frequencyDataArray=new Uint8Array(r),this.timeDomainDataArray=new Uint8Array(r),s&&(this.debug=new c(this)),this._load(t,a),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame}return o(e,[{key:"_load",value:function(e,t){var n=this;if(e){this._isLoaded=!1,this._progress=0;var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onprogress=function(e){n._progress=e.loaded/e.total},i.onload=function(){n.ctx.decodeAudioData(i.response,function(e){n._buffer=e,n._isLoaded=!0,t&&t()},function(e){console.log(e)})},i.send()}}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.req&&cancelAnimationFrame(this.req),this._onUpdate(),this._isPlaying=!0;var t=this._pauseTime-this._startTime+e;this._startTime=this.ctx.currentTime-t,this.sourceNode=this.ctx.createBufferSource(),this.sourceNode.connect(this.analyserNode),this.sourceNode.buffer=this._buffer,this.sourceNode.start(0,t),this.sourceNode.addEventListener("ended",this._onEnded,!1)}},{key:"pause",value:function(){this.req&&cancelAnimationFrame(this.req),this.sourceNode&&(this.sourceNode.removeEventListener("ended",this._onEnded,!1),this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode=null),this._pauseTime=this.ctx.currentTime,this._isPlaying=!1}},{key:"before",value:function(e,t,n){var i=this;return this._sections.push({label:e,condition:function(){return i.time<t},callback:n}),this}},{key:"after",value:function(e,t,n){var i=this;return this._sections.push({label:e,condition:function(){return i.time>t},callback:n}),this}},{key:"between",value:function(e,t,n,i){var o=this;return this._sections.push({label:e,condition:function(){return o.time>t&&o.time<n},callback:i}),this}},{key:"onceAt",value:function(e,t,n){var i=this,o=null;return this._sections.push({label:e,condition:function(){return i.time>t&&!this.called},callback:function(){console.log("once :",o.label),n.call(this),o.called=!0},called:!1}),o=this._sections[this._sections.length-1],this}},{key:"getSpectrum",value:function(){return this.analyserNode.getByteFrequencyData(this.frequencyDataArray),this.frequencyDataArray}},{key:"getWaveform",value:function(){return this.analyserNode.getByteTimeDomainData(this.timeDomainDataArray),this.timeDomainDataArray}},{key:"getFrequency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=0,i=this.getSpectrum();if(void 0!==t){for(var o=e;o<=t;o++)n+=i[o];return n/(t-e+1)}return i[e]}},{key:"createKick",value:function(e){var t=e.frequency,n=e.threshold,i=e.decay,o=e.onKick,a=e.offKick,r=new s({frequency:t,threshold:n,decay:i,onKick:o,offKick:a});return this._kicks.push(r),r}},{key:"createBeat",value:function(e){var t=e.factor,n=e.onBeat,i=new r({factor:t,onBeat:n});return this._beats.push(i),i}},{key:"onUpdate",value:function(){this.req=requestAnimationFrame(this._onUpdate);for(var e in this._sections)this._sections[e].condition()&&this._sections[e].callback.call(this);var t=this.getSpectrum();for(var n in this._kicks)this._kicks[n].calc(t);var i=Math.max(0,this.time-this._offsetTime);for(var o in this._beats)this._beats[o].calc(i,this._beatDuration);this.debug&&this.debug.draw()}},{key:"onEnded",value:function(){this.stop()}},{key:"progress",get:function(){return this._progress}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"duration",get:function(){return this._isLoaded?this._buffer.duration:0}},{key:"time",get:function(){return this.isPlaying?this.ctx.currentTime-this._startTime:this._pauseTime-this._startTime}},{key:"volume",set:function(e){this.gainNode.gain.value=e},get:function(){return this.gainNode.gain.value}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"beatDuration",get:function(){return this._beatDuration}}]),e}();t.default=a;var s=function(){function e(t){var n=t.frequency,o=t.threshold,a=t.decay,s=t.onKick,r=t.offKick;i(this,e),this.frequency=void 0!==n?n:[0,10],this.threshold=void 0!==o?o:.3,this.decay=void 0!==a?a:.02,this.onKick=s,this.offKick=r,this.isOn=!1,this.isKick=!1,this.currentThreshold=this.threshold}return o(e,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(e){var t=e.frequency,n=e.threshold,i=e.decay,o=e.onKick,a=e.offKick;this.frequency=void 0!==t?t:this.frequency,this.threshold=void 0!==n?n:this.threshold,this.decay=void 0!==i?i:this.decay,this.onKick=o||this.onKick,this.offKick=a||this.offKick}},{key:"calc",value:function(e){if(this.isOn){var t=this.maxAmplitude(e,this.frequency);t>=this.currentThreshold&&t>=this.threshold?(this.currentThreshold=t,this.onKick&&this.onKick(t),this.isKick=!0):(this.offKick&&this.offKick(t),this.currentThreshold-=this.decay,this.isKick=!1)}}},{key:"maxAmplitude",value:function(e,t){var n=0;if(!t.length)return t<e.length?e[~~t]:null;for(var i=t[0],o=t[1];i<=o;i++)e[i]>n&&(n=e[i]);return n}}]),e}(),r=function(){function e(t){var n=t.factor,o=t.onBeat;i(this,e),this.factor=void 0!==n?n:1,this.onBeat=o,this.isOn=!1,this.currentTime=0}return o(e,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(e){var t=e.factor,n=e.onBeat;this.factor=void 0!==t?t:this.factor,this.onBeat=n||this.onBeat}},{key:"calc",value:function(e,t){if(0!=e){var n=t*this.factor;e>=this.currentTime+n&&(this.isOn&&this.onBeat&&this.onBeat(),this.currentTime+=n)}}}]),e}(),c=function(){function e(t){i(this,e),this.sound=t,this.canvas=document.createElement("canvas"),this.canvas.width=512,this.canvas.height=300,this.canvas.style.position="absolute",this.canvas.style.bottom=0,this.canvas.style.left=0,this.canvas.style.zIndex=3,document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),window.addEventListener("resize",this.resize.bind(this),!1),this.resize()}return o(e,[{key:"resize",value:function(){this.canvas.width=window.innerWidth}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.strokeStyle="#a1a1a1",this.ctx.stroke(),this.ctx.beginPath();for(var e=this.sound.getSpectrum(),t=null,n=e.length,i=this.canvas.width/n,o=this.canvas.height-10,a=0;a<n;a++)t=e[a]/256,this.ctx.rect(a*i,o-o*t,i/2,o*t);this.ctx.fillStyle="#ffffff",this.ctx.fill(),this.ctx.beginPath(),this.ctx.font="10px Arial",this.ctx.textBaseline="middle",this.ctx.textAlign="left";for(var s=0,r=n;s<r;s++)s%10==0&&(this.ctx.rect(s*i,o,i/2,10),this.ctx.fillText(s,s*i+4,o+5));this.ctx.fillStyle="#ffffff",this.ctx.fill();for(var c=this.sound._kicks,h=null,u=c.length,d=null,l=null,f=0,m=u;f<m;f++)h=c[f],h.isOn&&(d=h.frequency.length?h.frequency[0]:h.frequency,l=h.frequency.length?h.frequency[1]-h.frequency[0]+1:1,this.ctx.beginPath(),this.ctx.rect(d*i,o-o*(h.threshold/256),l*i-.5*i,2),this.ctx.rect(d*i,o-o*(h.currentThreshold/256),l*i-.5*i,5),this.ctx.fillStyle=h.isKick?"#00ff00":"#ff0000",this.ctx.fill());this.ctx.beginPath();for(var p=this.sound.getWaveform(),g=null,b=p.length,v=this.canvas.width/b,y=this.canvas.height-10,w=0;w<b;w++)g=p[w]/256,0==w?this.ctx.moveTo(w*v,y*g):this.ctx.lineTo(w*v,y*g);this.ctx.strokeStyle="#0000ff",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.textAlign="right",this.ctx.textBaseline="top",this.ctx.font="15px Arial",this.ctx.fillStyle="#ffffff",this.ctx.fillText(Math.round(10*this.sound.time)/10+" / "+Math.round(10*this.sound.duration)/10,this.canvas.width-5,5),this.ctx.beginPath();for(var x=this.sound._sections,E=null,k=x.length,T="",P=0,O=k;P<O;P++)E=x[P],E.condition()&&(T+=E.label+" - ");T.length>0&&(T=T.substr(0,T.length-3)),this.ctx.fillText(T,this.canvas.width-5,25),this.ctx.fill()}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t,n,o){var a=this;i(this,e),this.divId=document.getElementById(t),this.name=document.createElement("audio"),this.divId.id="audio-player",this.name.src=o,this.name.type="audio/mpeg",this.divId.appendChild(this.name),this.divId.addEventListener("click",function(){a.name.play()})};t.default=o},,function(e,t,n){e.exports=n.p+"models/json/Champignons/Champignons.json"},function(e,t,n){e.exports=n.p+"models/json/Champignons/Texture/Champignons.jpg"},function(e,t,n){e.exports=n.p+"models/json/Granit01/Granit01.json"},function(e,t,n){e.exports=n.p+"models/json/Granit01/Texture/Granit01.jpg"},function(e,t,n){e.exports=n.p+"models/json/Granit02/Granit02.json"},function(e,t,n){e.exports=n.p+"models/json/Granit02/Texture/Granit02.jpg"},function(e,t,n){e.exports=n.p+"models/json/Granit03/Granit03.json"},function(e,t,n){e.exports=n.p+"models/json/Granit03/Texture/Granit03.jpg"},function(e,t,n){e.exports=n.p+"models/json/Personnage/PersonnageZombie.json"},function(e,t,n){e.exports=n.p+"models/json/Personnage/Texture/ZombieAlpha.jpg"},function(e,t,n){e.exports=n.p+"models/json/Personnage/Texture/ZombieDiff.jpg"},function(e,t,n){e.exports=n.p+"models/json/Plantes/Plantes.json"},function(e,t,n){e.exports=n.p+"models/json/Plantes/Texture/Plantes_Alpha.jpg"},function(e,t,n){e.exports=n.p+"models/json/Plantes/Texture/Plantes_DIFF.jpg"},function(e,t,n){e.exports=n.p+"models/json/Potiron/Potiron.json"},function(e,t,n){e.exports=n.p+"models/json/Potiron/Texture/Potiron.jpg"},function(e,t,n){e.exports=n.p+"models/json/Terrain/Terrain.json"},function(e,t,n){e.exports=n.p+"models/json/Terrain/Texture/Terrain.jpg"},function(e,t,n){e.exports=n.p+"sources/music/Crow.mp3"},function(e,t,n){e.exports=n.p+"sources/music/EvilLaugh.mp3"},function(e,t,n){e.exports=n.p+"sources/music/Thriller.mp3"},function(e,t,n){e.exports=n.p+"sources/music/Wolf.mp3"},function(e,t,n){e.exports=n.p+"sources/music/YeahYeah.mp3"},function(e,t,n){e.exports=n.p+"sources/music/Zombie.mp3"}],[3]);